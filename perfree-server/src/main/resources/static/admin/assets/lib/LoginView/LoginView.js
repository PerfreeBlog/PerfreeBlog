import{_ as A,c as K,l as M,d as P,C as z,g as U,e as _}from"../../index-pGlV8HnW.js";const n=window.Vue.createElementVNode,l=window.Vue.resolveComponent,e=window.Vue.createVNode,s=window.Vue.withCtx,y=window.Vue.withKeys,v=window.Vue.unref,h=window.Vue.openBlock,W=window.Vue.createBlock,x=window.Vue.createCommentVNode,q=window.Vue.withModifiers,N=window.Vue.createTextVNode,S=window.Vue.createElementBlock,G=window.Vue.pushScopeId,L=window.Vue.popScopeId,p=d=>(G("data-v-25137f98"),d=d(),L(),d),H={class:"container"},j={class:"login-box"},F=p(()=>n("h3",{class:"title"},"Perfree",-1)),J={class:"login-code"},$=["src"],D=p(()=>n("span",null,"登 录",-1)),Q={class:"login-bottom-box"},X={key:0,class:"register-box"},Y=p(()=>n("div",{class:"forget-password-box"},[n("a",{href:"javascript:;"},"忘记密码?")],-1)),Z=p(()=>n("div",{class:"login-footer"},[n("span",null,"Copyright © 2018-2024 All Rights Reserved. ")],-1)),ee=window.ElementPlus.ElMessage,oe=window.VueRouter.useRouter,te=window.Vue.computed,se=window.Vue.getCurrentInstance,r=window.Vue.ref,ne={__name:"LoginView",setup(d){const{proxy:I}=se(),b=oe();let m=r(!1),C=r(!1);const k=K(),o=r({username:"",password:"",rememberMe:!1,code:"",uuid:""}),R=te(()=>({username:[{required:!0,trigger:"blur",message:"请输入您的账户"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"}],code:[{required:!0,trigger:"blur",message:"请输入验证码"}]}));let E=r("");const f=r(!1),w=()=>{I.$refs.loginRef.validate(a=>{a&&M(o.value).then(t=>{t.code===200?(k.setMenuInit(!1),P(),localStorage.setItem(z.STORAGE_TOKEN,JSON.stringify(t.data)),b.replace("/admin")):(ee.error(t.msg),o.value.code="",f.value=!1,c())}).catch(()=>{o.value.code="",f.value=!1,c()})})},c=()=>{U().then(a=>{E.value="data:image/gif;base64,"+a.data.img,o.value.uuid=a.data.uuid})};return(()=>{m.value=_("WEB_OPEN_CAPTCHA")?_("WEB_OPEN_CAPTCHA").value==="ON":!0,C.value=_("WEB_IS_REGISTER")?_("WEB_IS_REGISTER").value==="ON":!0,m.value&&c()})(),(a,t)=>{const g=l("font-awesome-icon"),V=l("el-input"),u=l("el-form-item"),O=l("el-button"),B=l("router-link"),T=l("el-form");return h(),S("div",H,[n("div",j,[e(T,{ref:"loginRef",model:o.value,rules:R.value,class:"login-form"},{default:s(()=>[F,e(u,{prop:"username"},{default:s(()=>[e(V,{modelValue:o.value.username,"onUpdate:modelValue":t[0]||(t[0]=i=>o.value.username=i),type:"text",size:"large","auto-complete":"off",placeholder:"请输入账户"},{prefix:s(()=>[e(g,{icon:"fa-regular fa-user "})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"password"},{default:s(()=>[e(V,{modelValue:o.value.password,"onUpdate:modelValue":t[1]||(t[1]=i=>o.value.password=i),type:"password",size:"large","auto-complete":"off",placeholder:"请输入密码",onKeyup:y(w,["enter"])},{prefix:s(()=>[e(g,{icon:"fa-solid fa-lock "})]),_:1},8,["modelValue"])]),_:1}),v(m)?(h(),W(u,{key:0,prop:"code"},{default:s(()=>[e(V,{modelValue:o.value.code,"onUpdate:modelValue":t[2]||(t[2]=i=>o.value.code=i),"auto-complete":"off",placeholder:"请输入验证码",size:"large",style:{width:"63%"},onKeyup:y(w,["enter"])},{prefix:s(()=>[e(g,{icon:"fa-solid fa-fax  "})]),_:1},8,["modelValue"]),n("div",J,[n("img",{src:v(E),onClick:c,class:"login-code-img"},null,8,$)])]),_:1})):x("",!0),e(u,{style:{width:"100%","margin-top":"20px"}},{default:s(()=>[e(O,{loading:f.value,size:"large",type:"primary",style:{width:"100%"},onClick:q(w,["prevent"])},{default:s(()=>[D]),_:1},8,["loading"]),n("div",Q,[v(C)?(h(),S("div",X,[N(" 没有账号? "),e(B,{class:"link-type",to:"/register"},{default:s(()=>[N("立即注册")]),_:1})])):x("",!0),Y])]),_:1})]),_:1},8,["model","rules"])]),Z])}}},ie=A(ne,[["__scopeId","data-v-25137f98"]]);export{ie as default};
