import{_ as b,j as x,C as k,k as y}from"../../index-Cbj4A6nx.js";const u=window.Vue.createElementVNode,i=window.Vue.resolveComponent,e=window.Vue.createVNode,t=window.Vue.withCtx,N=window.Vue.openBlock,C=window.Vue.createElementBlock,h={class:"container"},E={class:"init-box"},R=window.VueRouter.useRouter,T=window.Vue.computed,z=window.Vue.getCurrentInstance,P=window.Vue.onMounted,c=window.Vue.ref,p=window.ElementPlus.ElMessage,U={__name:"InitView",setup(q){const{proxy:f}=z(),w=R(),l=c({webName:"",webTitle:"",email:"",account:"",username:"",password:"",checkPassword:""}),g=T(()=>({username:[{required:!0,trigger:"blur",message:"请输入管理员名称"}],account:[{required:!0,trigger:"blur",message:"请输入管理员账户"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}],checkPassword:[{required:!0,trigger:"blur",message:"请再次输入密码"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],webTitle:[{required:!0,trigger:"blur",message:"请输入网站标题"}],webName:[{required:!0,trigger:"blur",message:"请输入网站名称"}]})),d=c(!1);P(()=>{document.title="Perfree",x("/assets/favicon.ico"),localStorage.removeItem(k.STORAGE_TOKEN)});const V=()=>{f.$refs.initRef.validate(m=>{if(m){if(l.value.checkPassword!==l.value.password){p.error("两次输入的密码不一致!");return}d.value=!0,y(l.value).then(o=>{o.code===200?(p.success("网站初始化成功"),w.replace("/login")):p.error(o.msg),d.value=!1})}})};return(m,o)=>{const s=i("font-awesome-icon"),n=i("el-input"),r=i("el-form-item"),_=i("el-button"),v=i("el-form");return N(),C("div",h,[u("div",E,[e(v,{ref:"initRef",model:l.value,rules:g.value,class:"login-form"},{default:t(()=>[o[8]||(o[8]=u("h3",{class:"title"},"网站初始配置",-1)),e(r,{prop:"webName"},{default:t(()=>[e(n,{modelValue:l.value.webName,"onUpdate:modelValue":o[0]||(o[0]=a=>l.value.webName=a),type:"text",size:"large","auto-complete":"off",placeholder:"网站名称"},{prefix:t(()=>[e(s,{icon:"fa-solid fa-earth-africa"})]),_:1},8,["modelValue"])]),_:1}),e(r,{prop:"webTitle"},{default:t(()=>[e(n,{modelValue:l.value.webTitle,"onUpdate:modelValue":o[1]||(o[1]=a=>l.value.webTitle=a),type:"text",size:"large","auto-complete":"off",placeholder:"网站标题"},{prefix:t(()=>[e(s,{icon:"fa-solid fa-hospital-user"})]),_:1},8,["modelValue"])]),_:1}),e(r,{prop:"email"},{default:t(()=>[e(n,{modelValue:l.value.email,"onUpdate:modelValue":o[2]||(o[2]=a=>l.value.email=a),type:"text",size:"large","auto-complete":"off",placeholder:"邮箱"},{prefix:t(()=>[e(s,{icon:"fa-solid fa-mail-bulk"})]),_:1},8,["modelValue"])]),_:1}),e(r,{prop:"username"},{default:t(()=>[e(n,{modelValue:l.value.username,"onUpdate:modelValue":o[3]||(o[3]=a=>l.value.username=a),type:"text",size:"large","auto-complete":"off",placeholder:"请输入管理员名称"},{prefix:t(()=>[e(s,{icon:"fa-regular fa-user "})]),_:1},8,["modelValue"])]),_:1}),e(r,{prop:"account"},{default:t(()=>[e(n,{modelValue:l.value.account,"onUpdate:modelValue":o[4]||(o[4]=a=>l.value.account=a),type:"text",size:"large","auto-complete":"off",placeholder:"请输入管理员账户"},{prefix:t(()=>[e(s,{icon:"fa-regular fa-user "})]),_:1},8,["modelValue"])]),_:1}),e(r,{prop:"password"},{default:t(()=>[e(n,{modelValue:l.value.password,"onUpdate:modelValue":o[5]||(o[5]=a=>l.value.password=a),type:"password",size:"large","auto-complete":"off",placeholder:"请输入密码"},{prefix:t(()=>[e(s,{icon:"fa-solid fa-lock "})]),_:1},8,["modelValue"])]),_:1}),e(r,{prop:"checkPassword"},{default:t(()=>[e(n,{modelValue:l.value.checkPassword,"onUpdate:modelValue":o[6]||(o[6]=a=>l.value.checkPassword=a),type:"password",size:"large","auto-complete":"off",placeholder:"请再次输入密码"},{prefix:t(()=>[e(s,{icon:"fa-solid fa-lock "})]),_:1},8,["modelValue"])]),_:1}),e(r,{style:{width:"100%","margin-top":"20px"}},{default:t(()=>[e(_,{loading:d.value,size:"large",type:"primary",style:{width:"100%"},onClick:V},{default:t(()=>o[7]||(o[7]=[u("span",null,"提 交",-1)])),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]),o[9]||(o[9]=u("div",{class:"login-footer"},[u("span",null,"Copyright © 2018-2024 All Rights Reserved. ")],-1))])}}},B=b(U,[["__scopeId","data-v-f068ded4"]]);export{B as default};
