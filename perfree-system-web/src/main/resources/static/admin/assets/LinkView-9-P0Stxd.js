import{r as m,k as H,a as y,b as O,d as g,e,w as o,u as t,C as J,f,D as F,G as K,H as Q,j as z,h as W,t as U,N as X,O as Y,i as A,m as v,q as Z,s as ee,E as ae,y as le}from"./index-CihRDGxx.js";import{E as te,a as oe,v as ne}from"./el-table-column-CTu-3kzb.js";import"./el-dialog-DFE0lXHY.js";import{E as ie}from"./el-pagination-DVMT5liM.js";import{p as se}from"./perfree-nhCXPnWy.js";import{E as re}from"./el-image-viewer-EMjiGCdX.js";import{E as de,a as ue}from"./el-col-BEhwhFzy.js";import{_ as me}from"./attach-select-input-DKludTtF.js";import{E as pe}from"./index-DVZG1lLp.js";import{E as ce}from"./index-uh3ESdbA.js";/* empty css                */import"./attach-BUqG8fMY.js";/* empty css                                                                            */import"./index-Bt2gs6dP.js";function fe(r){return axios.post("/api/auth/link/page",r)}function _e(r){return axios.post("/api/auth/link/add",r)}function ge(r){return axios.put("/api/auth/link/update",r)}function ve(r){return axios.get("/api/auth/link/get?id="+r)}function he(r){return axios.delete("/api/auth/link/del?id="+r)}const be={class:"page"},ke={class:"search-box"},we={class:"right-tool"},xe={class:"table-box"},ye=["href"],Ee={class:"dialog-footer"},Ie={__name:"LinkView",setup(r){const i=m({pageNo:1,pageSize:20,total:0,name:""}),E=m();let s=m(!1),w=m(""),V=m([]),x=m(!1);const n=m({id:"",name:"",logo:"",desc:"",address:""}),R=H({name:[{required:!0,message:"请输入网站名称",trigger:"blur"}],address:[{required:!0,message:"请输入网站地址",trigger:"blur"}]}),b=m();function p(){x.value=!0,fe(i.value).then(d=>{V.value=d.data.list,i.value.total=d.data.total,x.value=!1})}function B(){i.value={name:""},E.value.resetFields()}function N(){h(),w.value="添加标签",s.value=!0}function h(){n.value={id:"",name:"",logo:"",desc:"",address:""},b.value&&b.value.resetFields()}function T(){b.value.validate(d=>{d&&(n.value.id?ge(n.value).then(a=>{a.code===200?(v.success("修改成功"),s.value=!1,h(),p()):v.error(a.msg)}):_e(n.value).then(a=>{a.code===200?(v.success("添加成功"),s.value=!1,h(),p()):v.error(a.msg)}))})}function D(d){w.value="修改标签",h(),ve(d.id).then(a=>{n.value=a.data,s.value=!0})}function S(d){pe.confirm("确定要删除["+d.name+"]吗？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{he(d.id).then(a=>{a.code===200&&a.data?(v.success("删除成功"),p()):v.error(a.msg)})}).catch(()=>{})}return p(),(d,a)=>{const k=Z,_=ee,u=ae,C=le,L=de,q=ue,c=te,I=re,P=oe,$=ie,j=ce,M=ne;return y(),O("div",be,[g("div",ke,[e(C,{inline:!0,model:t(i),class:"demo-form-inline",ref_key:"searchFormRef",ref:E},{default:o(()=>[e(_,{label:"网站名称"},{default:o(()=>[e(k,{modelValue:t(i).name,"onUpdate:modelValue":a[0]||(a[0]=l=>t(i).name=l),placeholder:"请输入网站名称",clearable:""},null,8,["modelValue"])]),_:1}),e(_,null,{default:o(()=>[e(u,{type:"primary",onClick:p,icon:t(J)},{default:o(()=>[f("查询")]),_:1},8,["icon"]),e(u,{icon:t(F),onClick:B},{default:o(()=>[f("重置")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),e(q,{gutter:10,class:"mb8"},{default:o(()=>[e(L,{span:1.5},{default:o(()=>[e(u,{icon:t(K),type:"primary",plain:"",onClick:N},{default:o(()=>[f("新增")]),_:1},8,["icon"])]),_:1}),g("div",we,[e(u,{icon:t(F),circle:"",onClick:p},null,8,["icon"])])]),_:1}),g("div",xe,[Q((y(),z(P,{data:t(V),style:{width:"100%",height:"100%"},"row-key":"id"},{default:o(()=>[e(c,{label:"序号","min-width":"80",type:"index"}),e(c,{prop:"name",label:"网站名称","min-width":"150"}),e(c,{prop:"logo",label:"网站logo","min-width":"60"},{default:o(l=>[l.row.logo?(y(),z(I,{key:0,style:{width:"100%","max-height":"100%"},src:l.row.logo,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[l.row.logo],"initial-index":4,"append-to-body":"",fit:"cover","preview-teleported":""},null,8,["src","preview-src-list"])):W("",!0)]),_:1}),e(c,{prop:"desc",label:"网站描述","min-width":"150"}),e(c,{prop:"address",label:"网站地址","min-width":"150"},{default:o(l=>[g("a",{href:l.row.address,target:"_blank"},U(l.row.address),9,ye)]),_:1}),e(c,{prop:"createTime",label:"创建时间","min-width":"120"},{default:o(l=>[g("span",null,U(t(se)(l.row.createTime)),1)]),_:1}),e(c,{label:"操作",width:"140",fixed:"right"},{default:o(l=>[e(u,{size:"small",type:"primary",link:"",icon:t(X),onClick:G=>D(l.row)},{default:o(()=>[f("修改")]),_:2},1032,["icon","onClick"]),e(u,{size:"small",type:"primary",link:"",icon:t(Y),onClick:G=>S(l.row)},{default:o(()=>[f("删除")]),_:2},1032,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[M,t(x)]]),e($,{"current-page":t(i).pageNo,"onUpdate:currentPage":a[1]||(a[1]=l=>t(i).pageNo=l),"page-size":t(i).pageSize,"onUpdate:pageSize":a[2]||(a[2]=l=>t(i).pageSize=l),"page-sizes":[10,20,30,50],layout:"total,sizes,prev, pager, next, jumper",background:"",small:"",onChange:p,total:t(i).total},null,8,["current-page","page-size","total"])]),e(j,{modelValue:t(s),"onUpdate:modelValue":a[8]||(a[8]=l=>A(s)?s.value=l:s=l),title:t(w),width:"600px",draggable:""},{footer:o(()=>[g("span",Ee,[e(u,{type:"primary",onClick:T},{default:o(()=>[f("确 定")]),_:1}),e(u,{onClick:a[7]||(a[7]=l=>{A(s)?s.value=!1:s=!1,h()})},{default:o(()=>[f("取 消")]),_:1})])]),default:o(()=>[e(C,{ref_key:"addFormRef",ref:b,model:t(n),"label-width":"80px","status-icon":"",rules:t(R)},{default:o(()=>[e(_,{label:"网站名称",prop:"name"},{default:o(()=>[e(k,{modelValue:t(n).name,"onUpdate:modelValue":a[3]||(a[3]=l=>t(n).name=l),placeholder:"请输入网站名称"},null,8,["modelValue"])]),_:1}),e(_,{label:"网站地址",prop:"address"},{default:o(()=>[e(k,{modelValue:t(n).address,"onUpdate:modelValue":a[4]||(a[4]=l=>t(n).address=l),placeholder:"请输入网站地址"},null,8,["modelValue"])]),_:1}),e(_,{label:"网站logo",prop:"logo"},{default:o(()=>[e(me,{"attach-type":"img","enable-input":!0,placeholder:"请输入网站logo地址","model-value":t(n).logo,"onUpdate:modelValue":a[5]||(a[5]=l=>t(n).logo=l)},null,8,["model-value"])]),_:1}),e(_,{label:"网站描述",prop:"desc"},{default:o(()=>[e(k,{modelValue:t(n).desc,"onUpdate:modelValue":a[6]||(a[6]=l=>t(n).desc=l),placeholder:"请输入网站描述",autosize:{minRows:3,maxRows:6},type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}};export{Ie as default};
