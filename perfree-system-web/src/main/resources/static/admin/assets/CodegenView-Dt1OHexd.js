import{r as s,a as C,b as H,d as c,e,w as l,u as a,C as D,f as r,D as w,aD as O,H as x,j as U,t as J,N as K,aE as B,O as Q,i as L,aF as W,m as X,n as Y,q as Z,s as ee,E as ae,y as le}from"./index-DAZg6KgI.js";import{E as te,a as oe,v as ne}from"./el-table-column-DZMpWYo5.js";import"./el-dialog-Cx6vfFNe.js";import{E as ie}from"./el-pagination-x5Aplci8.js";import{p as se}from"./perfree-h22k_lv_.js";import{E as re,a as de}from"./el-col-Y4mM9eD_.js";import{c as me,a as ue,b as ce}from"./codegen-j_R_Bm1T.js";import{E as pe}from"./index-AgTUDQsJ.js";const fe={class:"page"},_e={class:"search-box"},ge={class:"right-tool"},be={class:"table-box"},he={class:"dialog-footer"},ze={__name:"CodegenView",setup(ve){const d=s({pageNo:1,pageSize:20,total:0,tableName:""}),$=s(),p=s({tableName:""});W();const g=s(),b=s();let E=s([]),N=s([]),h=s(!1),v=s(!1),m=s(!1),F=s("");function f(){v.value=!0,me(d.value).then(o=>{v.value=!1,E.value=o.data.list,d.value.total=o.data.total})}function P(){k(),F.value="导入表",m.value=!0,V()}function V(){h.value=!0,ue(p.value).then(o=>{N.value=o.data,h.value=!1})}function k(){p.value={tableName:""},g.value&&g.value.resetFields()}function A(){if(b.value.getSelectionRows().length<=0){X.error("至少选择一张表!");return}let o={tableNames:[]};b.value.getSelectionRows().forEach(n=>{o.tableNames.push(n.name)}),ce(o).then(n=>{f(),m.value=!1})}function I(o){Y(`代码生成-配置[${o.tableName}]`,"/admin/codegen/editConfig/"+o.id,"")}return f(),(o,n)=>{const z=Z,_=ee,i=ae,R=le,j=re,M=de,u=te,S=oe,q=ie,G=pe,T=ne;return C(),H("div",fe,[c("div",_e,[e(R,{inline:!0,model:a(d),class:"demo-form-inline",ref_key:"searchFormRef",ref:$},{default:l(()=>[e(_,{label:"表名称"},{default:l(()=>[e(z,{modelValue:a(d).tableName,"onUpdate:modelValue":n[0]||(n[0]=t=>a(d).tableName=t),placeholder:"请输入表名称",clearable:""},null,8,["modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(i,{type:"primary",onClick:f,icon:a(D)},{default:l(()=>[r("查询")]),_:1},8,["icon"]),e(i,{icon:a(w),onClick:o.resetSearchForm},{default:l(()=>[r("重置")]),_:1},8,["icon","onClick"])]),_:1})]),_:1},8,["model"])]),e(M,{gutter:10,class:"mb8"},{default:l(()=>[e(j,{span:1.5},{default:l(()=>[e(i,{icon:a(O),type:"primary",plain:"",onClick:P},{default:l(()=>[r("导入表")]),_:1},8,["icon"])]),_:1}),c("div",ge,[e(i,{icon:a(w),circle:"",onClick:f},null,8,["icon"])])]),_:1}),c("div",be,[x((C(),U(S,{data:a(E),style:{width:"100%",height:"100%"},"row-key":"id"},{default:l(()=>[e(u,{prop:"tableName",label:"表名称","min-width":"150"}),e(u,{prop:"tableComment",label:"表描述","min-width":"150"}),e(u,{prop:"className",label:"类名称","min-width":"150"}),e(u,{prop:"createTime",label:"创建时间","min-width":"120"},{default:l(t=>[c("span",null,J(a(se)(t.row.createTime)),1)]),_:1}),e(u,{label:"操作",width:"280",fixed:"right"},{default:l(t=>[e(i,{size:"small",type:"primary",link:"",icon:a(K),onClick:y=>o.handleUpdate(t.row)},{default:l(()=>[r("预览")]),_:2},1032,["icon","onClick"]),e(i,{size:"small",type:"primary",link:"",icon:a(B),onClick:y=>I(t.row)},{default:l(()=>[r("配置")]),_:2},1032,["icon","onClick"]),e(i,{size:"small",type:"primary",link:"",icon:a(B),onClick:y=>o.handleRoleMenu(t.row)},{default:l(()=>[r("下载")]),_:2},1032,["icon","onClick"]),e(i,{size:"small",type:"primary",link:"",icon:a(Q),onClick:y=>o.handleDelete(t.row)},{default:l(()=>[r("删除")]),_:2},1032,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[T,a(v)]]),e(q,{"current-page":a(d).pageNo,"onUpdate:currentPage":n[1]||(n[1]=t=>a(d).pageNo=t),"page-size":a(d).pageSize,"onUpdate:pageSize":n[2]||(n[2]=t=>a(d).pageSize=t),"page-sizes":[10,20,30,50],layout:"total,sizes,prev, pager, next, jumper",background:"",small:"",onChange:f,total:a(d).total},null,8,["current-page","page-size","total"])]),e(G,{modelValue:a(m),"onUpdate:modelValue":n[5]||(n[5]=t=>L(m)?m.value=t:m=t),title:a(F),width:"600px",draggable:""},{footer:l(()=>[c("span",he,[e(i,{type:"primary",onClick:A},{default:l(()=>[r("确 定")]),_:1}),e(i,{onClick:n[4]||(n[4]=t=>{L(m)?m.value=!1:m=!1,k()})},{default:l(()=>[r("取 消")]),_:1})])]),default:l(()=>[c("div",null,[e(R,{inline:!0,model:a(p),class:"demo-form-inline",ref_key:"addSearchFormRef",ref:g},{default:l(()=>[e(_,{label:"表名称"},{default:l(()=>[e(z,{modelValue:a(p).tableName,"onUpdate:modelValue":n[3]||(n[3]=t=>a(p).tableName=t),placeholder:"请输入表名称",clearable:""},null,8,["modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(i,{type:"primary",onClick:V,icon:a(D)},{default:l(()=>[r("查询")]),_:1},8,["icon"]),e(i,{icon:a(w),onClick:k},{default:l(()=>[r("重置")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),x((C(),U(S,{data:a(N),style:{width:"100%",height:"100%"},"row-key":"id",ref_key:"multipleTableRef",ref:b,"max-height":"260"},{default:l(()=>[e(u,{type:"selection",width:"55"}),e(u,{prop:"name",label:"表名称","min-width":"150"}),e(u,{prop:"comment",label:"表描述","min-width":"150"})]),_:1},8,["data"])),[[T,a(h)]])])]),_:1},8,["modelValue","title"])])}}};export{ze as default};
