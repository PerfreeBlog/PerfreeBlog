import{r as d,a1 as H,a as u,y as K,b as C,d as O,e as p,f as e,w as l,u as a,z as U,h as s,B as N,a2 as Q,D as B,k as $,t as W,J as X,M as Y,a3 as E,N as Z,j as L,E as ee,q as ae}from"./index-R5kZ6j8p.js";import{c as le,a as te,b as oe}from"./codegen-j_R_Bm1T.js";const ne={class:"page"},ie={class:"search-box"},de={class:"right-tool"},se={class:"table-box"},re={class:"dialog-footer"},pe={__name:"CodegenView",setup(ue){const r=d({pageNo:1,pageSize:20,total:0,tableName:""}),A=d(),f=d({tableName:""});H();const b=d(),h=d();let z=d([]),V=d([]),v=d(!1),k=d(!1),c=d(!1),S=d("");function _(){k.value=!0,le(r.value).then(o=>{k.value=!1,z.value=o.data.list,r.value.total=o.data.total})}function M(){y(),S.value="导入表",c.value=!0,R()}function R(){v.value=!0,te(f.value).then(o=>{V.value=o.data,v.value=!1})}function y(){f.value={tableName:""},b.value&&b.value.resetFields()}function P(){if(h.value.getSelectionRows().length<=0){ee.error("至少选择一张表!");return}let o={tableNames:[]};h.value.getSelectionRows().forEach(n=>{o.tableNames.push(n.name)}),oe(o).then(n=>{_(),c.value=!1})}function j(o){ae(`代码生成-配置[${o.tableName}]`,"/admin/codegen/editConfig/"+o.id,"")}return _(),(o,n)=>{const F=u("el-input"),g=u("el-form-item"),i=u("el-button"),T=u("el-form"),q=u("el-col"),G=u("el-row"),m=u("el-table-column"),D=u("el-table"),I=u("el-pagination"),J=u("el-dialog"),x=K("loading");return C(),O("div",ne,[p("div",ie,[e(T,{inline:!0,model:a(r),class:"demo-form-inline",ref_key:"searchFormRef",ref:A},{default:l(()=>[e(g,{label:"表名称"},{default:l(()=>[e(F,{modelValue:a(r).tableName,"onUpdate:modelValue":n[0]||(n[0]=t=>a(r).tableName=t),placeholder:"请输入表名称",clearable:""},null,8,["modelValue"])]),_:1}),e(g,null,{default:l(()=>[e(i,{type:"primary",onClick:_,icon:a(U)},{default:l(()=>[s("查询")]),_:1},8,["icon"]),e(i,{icon:a(N),onClick:o.resetSearchForm},{default:l(()=>[s("重置")]),_:1},8,["icon","onClick"])]),_:1})]),_:1},8,["model"])]),e(G,{gutter:10,class:"mb8"},{default:l(()=>[e(q,{span:1.5},{default:l(()=>[e(i,{icon:a(Q),type:"primary",plain:"",onClick:M},{default:l(()=>[s("导入表")]),_:1},8,["icon"])]),_:1}),p("div",de,[e(i,{icon:a(N),circle:"",onClick:_},null,8,["icon"])])]),_:1}),p("div",se,[B((C(),$(D,{data:a(z),style:{width:"100%",height:"100%"},"row-key":"id"},{default:l(()=>[e(m,{prop:"tableName",label:"表名称","min-width":"150"}),e(m,{prop:"tableComment",label:"表描述","min-width":"150"}),e(m,{prop:"className",label:"类名称","min-width":"150"}),e(m,{prop:"createTime",label:"创建时间","min-width":"120"},{default:l(t=>[p("span",null,W(a(X)(t.row.createTime)),1)]),_:1}),e(m,{label:"操作",width:"280",fixed:"right"},{default:l(t=>[e(i,{size:"small",type:"primary",link:"",icon:a(Y),onClick:w=>o.handleUpdate(t.row)},{default:l(()=>[s("预览")]),_:2},1032,["icon","onClick"]),e(i,{size:"small",type:"primary",link:"",icon:a(E),onClick:w=>j(t.row)},{default:l(()=>[s("配置")]),_:2},1032,["icon","onClick"]),e(i,{size:"small",type:"primary",link:"",icon:a(E),onClick:w=>o.handleRoleMenu(t.row)},{default:l(()=>[s("下载")]),_:2},1032,["icon","onClick"]),e(i,{size:"small",type:"primary",link:"",icon:a(Z),onClick:w=>o.handleDelete(t.row)},{default:l(()=>[s("删除")]),_:2},1032,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[x,a(k)]]),e(I,{"current-page":a(r).pageNo,"onUpdate:currentPage":n[1]||(n[1]=t=>a(r).pageNo=t),"page-size":a(r).pageSize,"onUpdate:pageSize":n[2]||(n[2]=t=>a(r).pageSize=t),"page-sizes":[10,20,30,50],layout:"total,sizes,prev, pager, next, jumper",background:"",small:"",onChange:_,total:a(r).total},null,8,["current-page","page-size","total"])]),e(J,{modelValue:a(c),"onUpdate:modelValue":n[5]||(n[5]=t=>L(c)?c.value=t:c=t),title:a(S),width:"600px",draggable:""},{footer:l(()=>[p("span",re,[e(i,{type:"primary",onClick:P},{default:l(()=>[s("确 定")]),_:1}),e(i,{onClick:n[4]||(n[4]=t=>{L(c)?c.value=!1:c=!1,y()})},{default:l(()=>[s("取 消")]),_:1})])]),default:l(()=>[p("div",null,[e(T,{inline:!0,model:a(f),class:"demo-form-inline",ref_key:"addSearchFormRef",ref:b},{default:l(()=>[e(g,{label:"表名称"},{default:l(()=>[e(F,{modelValue:a(f).tableName,"onUpdate:modelValue":n[3]||(n[3]=t=>a(f).tableName=t),placeholder:"请输入表名称",clearable:""},null,8,["modelValue"])]),_:1}),e(g,null,{default:l(()=>[e(i,{type:"primary",onClick:R,icon:a(U)},{default:l(()=>[s("查询")]),_:1},8,["icon"]),e(i,{icon:a(N),onClick:y},{default:l(()=>[s("重置")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),B((C(),$(D,{data:a(V),style:{width:"100%",height:"100%"},"row-key":"id",ref_key:"multipleTableRef",ref:h,"max-height":"260"},{default:l(()=>[e(m,{type:"selection",width:"55"}),e(m,{prop:"name",label:"表名称","min-width":"150"}),e(m,{prop:"comment",label:"表描述","min-width":"150"})]),_:1},8,["data"])),[[x,a(v)]])])]),_:1},8,["modelValue","title"])])}}};export{pe as default};
