import{_ as K,r as c,l as O,a as i,y as Q,b as w,d as F,e as v,f as e,w as o,u as t,z as W,h as f,B as A,C as X,D as Y,k as U,a9 as Z,i as B,t as ee,J as le,M as ae,N as te,j as N,$ as oe,E as g,p as ne}from"./index-sKYmNANA.js";import{t as ie,a as se,b as re,c as de,d as ue}from"./tag-BQCuFRh1.js";const ce={class:"page"},me={class:"search-box"},pe={class:"right-tool"},fe={class:"table-box"},_e={class:"dialog-footer"},ge={__name:"TagView",setup(be){const s=c({pageNo:1,pageSize:20,total:0,name:""}),x=c();let r=c(!1),y=c(""),C=c([]),k=c(!1);const n=c({id:"",name:"",thumbnail:"",color:"",slug:""}),S=O({name:[{required:!0,message:"请输入标签名称",trigger:"blur"}]}),h=c();function m(){k.value=!0,ie(s.value).then(d=>{C.value=d.data.list,s.value.total=d.data.total,k.value=!1})}function T(){s.value={name:""},x.value.resetFields()}function D(){b(),y.value="添加标签",r.value=!0}function b(){n.value={id:"",name:"",thumbnail:"",color:"",slug:""},h.value&&h.value.resetFields()}function R(){h.value.validate(d=>{d&&(n.value.id?se(n.value).then(l=>{l.code===200?(g.success("修改成功"),r.value=!1,b(),m()):g.error(l.msg)}):re(n.value).then(l=>{l.code===200?(g.success("添加成功"),r.value=!1,b(),m()):g.error(l.msg)}))})}function E(d){y.value="修改标签",b(),de(d.id).then(l=>{n.value=l.data,r.value=!0})}function M(d){ne.confirm("确定要删除["+d.name+"]吗？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{ue(d.id).then(l=>{l.code===200&&l.data?(g.success("删除成功"),m()):g.error(l.msg)})}).catch(()=>{})}return m(),(d,l)=>{const V=i("el-input"),_=i("el-form-item"),u=i("el-button"),z=i("el-form"),$=i("el-col"),j=i("el-row"),p=i("el-table-column"),I=i("el-image"),P=i("el-table"),q=i("el-pagination"),G=i("el-color-picker"),J=i("el-dialog"),L=Q("loading");return w(),F("div",ce,[v("div",me,[e(z,{inline:!0,model:t(s),class:"demo-form-inline",ref_key:"searchFormRef",ref:x},{default:o(()=>[e(_,{label:"标签名称"},{default:o(()=>[e(V,{modelValue:t(s).name,"onUpdate:modelValue":l[0]||(l[0]=a=>t(s).name=a),placeholder:"请输入标签名称",clearable:""},null,8,["modelValue"])]),_:1}),e(_,null,{default:o(()=>[e(u,{type:"primary",onClick:m,icon:t(W)},{default:o(()=>[f("查询")]),_:1},8,["icon"]),e(u,{icon:t(A),onClick:T},{default:o(()=>[f("重置")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),e(j,{gutter:10,class:"mb8"},{default:o(()=>[e($,{span:1.5},{default:o(()=>[e(u,{icon:t(X),type:"primary",plain:"",onClick:D},{default:o(()=>[f("新增")]),_:1},8,["icon"])]),_:1}),v("div",pe,[e(u,{icon:t(A),circle:"",onClick:m},null,8,["icon"])])]),_:1}),v("div",fe,[Y((w(),U(P,{data:t(C),style:{width:"100%",height:"100%"},"row-key":"id"},{default:o(()=>[e(p,{label:"序号","min-width":"80",type:"index"}),e(p,{prop:"name",label:"标签名称","min-width":"150"}),e(p,{prop:"color",label:"颜色","min-width":"150"},{default:o(a=>[a.row.color?(w(),F("div",{key:0,class:"tableColor",style:Z({"background-color":a.row.color})},null,4)):B("",!0)]),_:1}),e(p,{prop:"slug",label:"slug","min-width":"150"}),e(p,{prop:"thumbnail",label:"封面图","min-width":"80"},{default:o(a=>[a.row.thumbnail?(w(),U(I,{key:0,style:{width:"100%","max-height":"100%"},src:a.row.thumbnail,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[a.row.thumbnail],"initial-index":4,"append-to-body":"",fit:"cover","preview-teleported":""},null,8,["src","preview-src-list"])):B("",!0)]),_:1}),e(p,{prop:"createTime",label:"创建时间","min-width":"120"},{default:o(a=>[v("span",null,ee(t(le)(a.row.createTime)),1)]),_:1}),e(p,{label:"操作",width:"140",fixed:"right"},{default:o(a=>[e(u,{size:"small",type:"primary",link:"",icon:t(ae),onClick:H=>E(a.row)},{default:o(()=>[f("修改")]),_:2},1032,["icon","onClick"]),e(u,{size:"small",type:"primary",link:"",icon:t(te),onClick:H=>M(a.row)},{default:o(()=>[f("删除")]),_:2},1032,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[L,t(k)]]),e(q,{"current-page":t(s).pageNo,"onUpdate:currentPage":l[1]||(l[1]=a=>t(s).pageNo=a),"page-size":t(s).pageSize,"onUpdate:pageSize":l[2]||(l[2]=a=>t(s).pageSize=a),"page-sizes":[10,20,30,50],layout:"total,sizes,prev, pager, next, jumper",background:"",small:"",onChange:m,total:t(s).total},null,8,["current-page","page-size","total"])]),e(J,{modelValue:t(r),"onUpdate:modelValue":l[8]||(l[8]=a=>N(r)?r.value=a:r=a),title:t(y),width:"600px",draggable:""},{footer:o(()=>[v("span",_e,[e(u,{type:"primary",onClick:R},{default:o(()=>[f("确 定")]),_:1}),e(u,{onClick:l[7]||(l[7]=a=>{N(r)?r.value=!1:r=!1,b()})},{default:o(()=>[f("取 消")]),_:1})])]),default:o(()=>[e(z,{ref_key:"addFormRef",ref:h,model:t(n),"label-width":"80px","status-icon":"",rules:t(S)},{default:o(()=>[e(_,{label:"标签名称",prop:"name"},{default:o(()=>[e(V,{modelValue:t(n).name,"onUpdate:modelValue":l[3]||(l[3]=a=>t(n).name=a),placeholder:"请输入标签名称"},null,8,["modelValue"])]),_:1}),e(_,{label:"标签颜色",prop:"color"},{default:o(()=>[e(G,{modelValue:t(n).color,"onUpdate:modelValue":l[4]||(l[4]=a=>t(n).color=a)},null,8,["modelValue"])]),_:1}),e(_,{label:"标签slug",prop:"slug"},{default:o(()=>[e(V,{modelValue:t(n).slug,"onUpdate:modelValue":l[5]||(l[5]=a=>t(n).slug=a),placeholder:"请输入标签slug"},null,8,["modelValue"])]),_:1}),e(_,{label:"封面图",prop:"thumbnail"},{default:o(()=>[e(oe,{"attach-type":"img","enable-input":!0,placeholder:"请选择封面图","model-value":t(n).thumbnail,"onUpdate:modelValue":l[6]||(l[6]=a=>t(n).thumbnail=a)},null,8,["model-value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},we=K(ge,[["__scopeId","data-v-18bc8972"]]);export{we as default};
