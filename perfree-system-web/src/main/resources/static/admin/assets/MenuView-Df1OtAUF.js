import{_ as se,r as c,a4 as M,a as r,b as u,k as i,w as l,f as e,i as k,e as w,u as a,j as Z,d as S,F as O,m as P,a5 as G,l as W,y as re,z as ie,h as d,B as X,C as Y,D as me,M as pe,N as ce,n as fe,p as _e,E as $}from"./index-DjtJnk74.js";import{m as be,a as ye,b as ve,c as ge,d as Ve}from"./menu-Zv2FujxN.js";const ke={class:"el-icon-picker"},xe={class:"icon-panel"},he={class:"icon-panel"},we={class:"icon-panel"},Ce={__name:"el-icon-picker",props:{modelValue:String},emits:["update:modelValue"],setup(C,{emit:D}){let F=c([]);Object.keys(M.definitions.fas).forEach(v=>{F.value.push("fa-solid fa-"+v)});let y=c([]);Object.keys(M.definitions.far).forEach(v=>{y.value.push("fa-regular fa-"+v)});let U=c([]);Object.keys(M.definitions.fab).forEach(v=>{U.value.push("fa-brands fa-"+v)});let x="fas";const I=D,f=c();function T(v){I("update:modelValue",v),f.value.hide()}return(v,t)=>{const q=r("font-awesome-icon"),h=r("el-input"),A=r("el-tab-pane"),j=r("el-tabs"),R=r("el-popover");return u(),i(R,{trigger:"click",width:"500",placement:"bottom-start",ref_key:"iconSelect",ref:f},{reference:l(()=>[e(h,{modelValue:C.modelValue,class:"w-50 m-2",placeholder:"请选择图标"},{prefix:l(()=>[C.modelValue?(u(),i(q,{key:0,icon:C.modelValue},null,8,["icon"])):k("",!0)]),_:1},8,["modelValue"])]),default:l(()=>[w("div",ke,[e(j,{modelValue:a(x),"onUpdate:modelValue":t[0]||(t[0]=s=>Z(x)?x.value=s:x=s)},{default:l(()=>[e(A,{label:"实心图标",name:"fas"},{default:l(()=>[w("div",xe,[(u(!0),S(O,null,P(a(F),s=>(u(),i(q,{class:G([s,"icon",{"icon-active":s===C.modelValue}]),icon:s,key:s,onClick:z=>T(s)},null,8,["class","icon","onClick"]))),128))])]),_:1}),e(A,{label:"常规图标",name:"far"},{default:l(()=>[w("div",he,[(u(!0),S(O,null,P(a(y),s=>(u(),i(q,{class:G([s,"icon",{"icon-active":s===C.modelValue}]),icon:s,key:s,onClick:z=>T(s)},null,8,["class","icon","onClick"]))),128))])]),_:1}),e(A,{label:"品牌图标",name:"fab"},{default:l(()=>[w("div",we,[(u(!0),S(O,null,P(a(U),s=>(u(),i(q,{class:G([s,"icon",{"icon-active":s===C.modelValue}]),icon:s,key:s,onClick:z=>T(s)},null,8,["class","icon","onClick"]))),128))])]),_:1})]),_:1},8,["modelValue"])])]),_:1},512)}}},Fe=se(Ce,[["__scopeId","data-v-59ad7b4f"]]),Te={class:"page"},Ue={class:"search-box"},qe={class:"right-tool"},Ne={class:"table-box"},$e={class:"dialog-footer"},Ee={__name:"MenuView",setup(C){const D=c(),F=c(),y=c({name:"",type:0});let U=c(!1),x=c([]),I=c([]),f=c(!1),T=c("");const v=W({children:"children",label:"name",value:"id"});let t=c({seq:0,icon:"",type:0,pid:"-1",name:"",url:"",componentName:"",component:"",perms:"",target:0,isFrame:1,status:0,menuType:0});const q=W({name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],seq:[{required:!0,message:"请输入排序",trigger:"blur"}],menuType:[{required:!0,message:"请选择菜单分类",trigger:"blur"}],status:[{required:!0,message:"请选择菜单状态",trigger:"blur"}],target:[{required:!0,message:"请选择菜单打开方式",trigger:"blur"}],isFrame:[{required:!0,message:"请选择菜单是否为外链",trigger:"blur"}],url:[{required:!0,message:"请输入菜单地址",trigger:"blur"}],type:[{required:!0,message:"请选择菜单类型",trigger:"blur"}]});function h(){U.value=!0,be(y.value).then(p=>{x.value=fe(p.data,"id","pid","children","-1"),I.value=[{id:"-1",name:"主类目",children:x.value}],U.value=!1})}function A(){y.value={name:"",type:0},D.value.resetFields()}function j(p){_e.confirm("确定要删除["+p.name+"]吗？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{ye(p.id).then(o=>{o.code===200&&o.data?($.success("删除成功"),h()):$.error(o.msg)})}).catch(()=>{})}function R(p){T.value="添加菜单",B(),f.value=!0,p&&p.id&&(t.value.pid=p.id,t.value.type=p.type)}function s(){f.value=!1,B()}function z(p){B(),ve(p.id).then(o=>{t.value=o.data,T.value="修改菜单",f.value=!0})}function ee(){F.value.validate(p=>{p&&(t.value.pid||(t.value.pid="-1"),t.value.id?ge(t.value).then(o=>{o.code===200?($.success("修改成功"),f.value=!1,B(),h()):$.error(o.msg)}):Ve(t.value).then(o=>{o.code===200?($.success("添加成功"),f.value=!1,B(),h()):$.error(o.msg)}))})}function B(){t.value={seq:0,icon:"",type:0,pid:"-1",name:"",url:"",componentName:"",component:"",perms:"",target:0,isFrame:1,status:0,menuType:0},F.value&&F.value.resetFields()}return h(),(p,o)=>{const N=r("el-input"),m=r("el-form-item"),H=r("el-option"),le=r("el-select"),g=r("el-button"),J=r("el-form"),_=r("el-col"),K=r("el-row"),V=r("el-table-column"),ae=r("font-awesome-icon"),L=r("el-tag"),te=r("el-table"),oe=r("el-tree-select"),b=r("el-radio"),E=r("el-radio-group"),ne=r("el-input-number"),ue=r("el-dialog"),de=re("loading");return u(),S("div",Te,[w("div",Ue,[e(J,{inline:!0,model:a(y),ref_key:"searchFormRef",ref:D},{default:l(()=>[e(m,{label:"菜单名称"},{default:l(()=>[e(N,{modelValue:a(y).name,"onUpdate:modelValue":o[0]||(o[0]=n=>a(y).name=n),placeholder:"请输入菜单名称",clearable:""},null,8,["modelValue"])]),_:1}),e(m,{label:"菜单分类"},{default:l(()=>[e(le,{modelValue:a(y).type,"onUpdate:modelValue":o[1]||(o[1]=n=>a(y).type=n),placeholder:"请选择菜单分类",clearable:"",style:{width:"200px"}},{default:l(()=>[(u(),i(H,{key:0,label:"前台",value:0})),(u(),i(H,{key:1,label:"后台",value:1}))]),_:1},8,["modelValue"])]),_:1}),e(m,null,{default:l(()=>[e(g,{type:"primary",onClick:h,icon:a(ie)},{default:l(()=>[d("查询")]),_:1},8,["icon"]),e(g,{icon:a(X),onClick:A},{default:l(()=>[d("重置")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),e(K,{gutter:10,class:"mb8"},{default:l(()=>[e(_,{span:1.5},{default:l(()=>[e(g,{icon:a(Y),type:"primary",plain:"",onClick:R},{default:l(()=>[d("新增")]),_:1},8,["icon"])]),_:1}),w("div",qe,[e(g,{icon:a(X),circle:"",onClick:h},null,8,["icon"])])]),_:1}),w("div",Ne,[me((u(),i(te,{data:a(x),style:{width:"100%",height:"100%"},"row-key":"id"},{default:l(()=>[e(V,{prop:"name",label:"菜单名称",width:"240"}),e(V,{prop:"icon",label:"图标",width:"100"},{default:l(n=>[n.row.icon?(u(),i(ae,{key:0,icon:n.row.icon},null,8,["icon"])):k("",!0)]),_:1}),e(V,{prop:"seq",label:"排序",width:"80"}),e(V,{prop:"url",label:"菜单地址","min-width":"150"}),e(V,{prop:"component",label:"组件路径","min-width":"150"}),e(V,{prop:"perms",label:"权限标识","min-width":"150"}),e(V,{prop:"status",label:"状态",width:"80"},{default:l(n=>[n.row.status===0?(u(),i(L,{key:0,class:"ml-2",type:"success"},{default:l(()=>[d("开启")]),_:1})):(u(),i(L,{key:1,class:"ml-2",type:"danger"},{default:l(()=>[d("关闭")]),_:1}))]),_:1}),e(V,{prop:"type",label:"菜单分类",width:"80"},{default:l(n=>[n.row.type===0?(u(),i(L,{key:0,class:"ml-2",type:"success"},{default:l(()=>[d("前台")]),_:1})):(u(),i(L,{key:1,class:"ml-2",type:"info"},{default:l(()=>[d("后台")]),_:1}))]),_:1}),e(V,{label:"操作",width:"240",fixed:"right"},{default:l(n=>[e(g,{size:"small",type:"primary",link:"",icon:a(pe),onClick:Q=>z(n.row)},{default:l(()=>[d("修改")]),_:2},1032,["icon","onClick"]),e(g,{size:"small",type:"primary",link:"",icon:a(Y),onClick:Q=>R(n.row)},{default:l(()=>[d("新增")]),_:2},1032,["icon","onClick"]),e(g,{size:"small",type:"primary",link:"",icon:a(ce),onClick:Q=>j(n.row)},{default:l(()=>[d("删除")]),_:2},1032,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[de,a(U)]])]),e(ue,{modelValue:a(f),"onUpdate:modelValue":o[15]||(o[15]=n=>Z(f)?f.value=n:f=n),title:a(T),width:"800px",draggable:""},{footer:l(()=>[w("span",$e,[e(g,{type:"primary",onClick:ee},{default:l(()=>[d("确 定")]),_:1}),e(g,{onClick:s},{default:l(()=>[d("取 消")]),_:1})])]),default:l(()=>[e(J,{ref_key:"ruleFormRef",ref:F,model:a(t),rules:a(q),"label-width":"100px",class:"demo-ruleForm","status-icon":""},{default:l(()=>[e(m,{label:"父级菜单",prop:"pid"},{default:l(()=>[e(oe,{modelValue:a(t).pid,"onUpdate:modelValue":o[2]||(o[2]=n=>a(t).pid=n),data:a(I),props:a(v),"check-strictly":"","render-after-expand":!1,style:{width:"100%"},clearable:""},null,8,["modelValue","data","props"])]),_:1}),e(m,{label:"菜单类型",prop:"menuType"},{default:l(()=>[e(E,{modelValue:a(t).menuType,"onUpdate:modelValue":o[3]||(o[3]=n=>a(t).menuType=n)},{default:l(()=>[e(b,{label:0,value:0},{default:l(()=>[d("目录")]),_:1}),e(b,{label:1,value:1},{default:l(()=>[d("菜单")]),_:1}),e(b,{label:2,value:2},{default:l(()=>[d("按钮")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(K,null,{default:l(()=>[e(_,{xs:24,sm:24,md:12,lg:12,xl:12},{default:l(()=>[e(m,{label:"菜单名称",prop:"name"},{default:l(()=>[e(N,{modelValue:a(t).name,"onUpdate:modelValue":o[4]||(o[4]=n=>a(t).name=n),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{xs:24,sm:24,md:12,lg:12,xl:12},{default:l(()=>[e(m,{label:"菜单分类",prop:"type"},{default:l(()=>[e(E,{modelValue:a(t).type,"onUpdate:modelValue":o[5]||(o[5]=n=>a(t).type=n)},{default:l(()=>[e(b,{label:0,value:0},{default:l(()=>[d("前台")]),_:1}),e(b,{label:1,value:1},{default:l(()=>[d("后台")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(t).menuType===0||a(t).menuType===1?(u(),i(_,{key:0,xs:24,sm:24,md:12,lg:12,xl:12},{default:l(()=>[e(m,{label:"菜单图标",prop:"icon"},{default:l(()=>[e(Fe,{modelValue:a(t).icon,"onUpdate:modelValue":o[6]||(o[6]=n=>a(t).icon=n)},null,8,["modelValue"])]),_:1})]),_:1})):k("",!0),e(_,{xs:24,sm:24,md:12,lg:12,xl:12},{default:l(()=>[e(m,{label:"菜单排序",prop:"seq"},{default:l(()=>[e(ne,{modelValue:a(t).seq,"onUpdate:modelValue":o[7]||(o[7]=n=>a(t).seq=n),min:0,max:9999,"controls-position":"right",placeholder:"菜单排序"},null,8,["modelValue"])]),_:1})]),_:1}),a(t).menuType===1?(u(),i(_,{key:1,xs:24,sm:24,md:12,lg:12,xl:12},{default:l(()=>[e(m,{label:"菜单地址",prop:"url"},{default:l(()=>[e(N,{modelValue:a(t).url,"onUpdate:modelValue":o[8]||(o[8]=n=>a(t).url=n),placeholder:"请输入菜单地址"},null,8,["modelValue"])]),_:1})]),_:1})):k("",!0),a(t).menuType===1&&a(t).type===1?(u(),i(_,{key:2,xs:24,sm:24,md:12,lg:12,xl:12},{default:l(()=>[e(m,{label:"组件名称",prop:"componentName"},{default:l(()=>[e(N,{modelValue:a(t).componentName,"onUpdate:modelValue":o[9]||(o[9]=n=>a(t).componentName=n),placeholder:"请输入组件名称"},null,8,["modelValue"])]),_:1})]),_:1})):k("",!0),a(t).menuType===1&&a(t).type===1?(u(),i(_,{key:3,xs:24,sm:24,md:12,lg:12,xl:12},{default:l(()=>[e(m,{label:"组件路径",prop:"component"},{default:l(()=>[e(N,{modelValue:a(t).component,"onUpdate:modelValue":o[10]||(o[10]=n=>a(t).component=n),placeholder:"请输入组件路径"},null,8,["modelValue"])]),_:1})]),_:1})):k("",!0),a(t).menuType===2?(u(),i(_,{key:4,xs:24,sm:24,md:12,lg:12,xl:12},{default:l(()=>[e(m,{label:"权限标识",prop:"perms"},{default:l(()=>[e(N,{modelValue:a(t).perms,"onUpdate:modelValue":o[11]||(o[11]=n=>a(t).perms=n),placeholder:"请输入权限标识"},null,8,["modelValue"])]),_:1})]),_:1})):k("",!0),a(t).menuType===1?(u(),i(_,{key:5,xs:24,sm:24,md:12,lg:12,xl:12},{default:l(()=>[e(m,{label:"打开方式",prop:"target"},{default:l(()=>[e(E,{modelValue:a(t).target,"onUpdate:modelValue":o[12]||(o[12]=n=>a(t).target=n)},{default:l(()=>[e(b,{label:0,value:0},{default:l(()=>[d("本页")]),_:1}),e(b,{label:1,value:1},{default:l(()=>[d("新窗口")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):k("",!0),a(t).menuType===1?(u(),i(_,{key:6,xs:24,sm:24,md:12,lg:12,xl:12},{default:l(()=>[e(m,{label:"是否外链",prop:"isFrame"},{default:l(()=>[e(E,{modelValue:a(t).isFrame,"onUpdate:modelValue":o[13]||(o[13]=n=>a(t).isFrame=n)},{default:l(()=>[e(b,{label:0,value:0},{default:l(()=>[d("是")]),_:1}),e(b,{label:1,value:1},{default:l(()=>[d("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):k("",!0),e(_,{xs:24,sm:24,md:12,lg:12,xl:12},{default:l(()=>[e(m,{label:"菜单状态",prop:"status"},{default:l(()=>[e(E,{modelValue:a(t).status,"onUpdate:modelValue":o[14]||(o[14]=n=>a(t).status=n)},{default:l(()=>[e(b,{label:0,value:0},{default:l(()=>[d("开启")]),_:1}),e(b,{label:1,value:1},{default:l(()=>[d("关闭")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}};export{Ee as default};
