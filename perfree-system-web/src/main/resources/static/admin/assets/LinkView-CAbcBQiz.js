import{r as c,l as H,a as s,y as K,b as V,d as O,e as v,f as e,w as o,u as t,z as Q,h as _,B as A,C as W,D as X,k as U,i as Y,t as B,J as Z,M as ee,N as le,j as N,$ as ae,E as h,p as te}from"./index-DQCGZ03O.js";function oe(r){return axios.post("/api/auth/link/page",r)}function ne(r){return axios.post("/api/auth/link/add",r)}function ie(r){return axios.put("/api/auth/link/update",r)}function de(r){return axios.get("/api/auth/link/get?id="+r)}function se(r){return axios.delete("/api/auth/link/del?id="+r)}const re={class:"page"},ue={class:"search-box"},pe={class:"right-tool"},ce={class:"table-box"},me=["href"],fe={class:"dialog-footer"},ge={__name:"LinkView",setup(r){const i=c({pageNo:1,pageSize:20,total:0,name:""}),C=c();let d=c(!1),x=c(""),z=c([]),y=c(!1);const n=c({id:"",name:"",logo:"",desc:"",address:""}),R=H({name:[{required:!0,message:"请输入网站名称",trigger:"blur"}],address:[{required:!0,message:"请输入网站地址",trigger:"blur"}]}),k=c();function m(){y.value=!0,oe(i.value).then(u=>{z.value=u.data.list,i.value.total=u.data.total,y.value=!1})}function D(){i.value={name:""},C.value.resetFields()}function S(){b(),x.value="添加标签",d.value=!0}function b(){n.value={id:"",name:"",logo:"",desc:"",address:""},k.value&&k.value.resetFields()}function T(){k.value.validate(u=>{u&&(n.value.id?ie(n.value).then(l=>{l.code===200?(h.success("修改成功"),d.value=!1,b(),m()):h.error(l.msg)}):ne(n.value).then(l=>{l.code===200?(h.success("添加成功"),d.value=!1,b(),m()):h.error(l.msg)}))})}function E(u){x.value="修改标签",b(),de(u.id).then(l=>{n.value=l.data,d.value=!0})}function L(u){te.confirm("确定要删除["+u.name+"]吗？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{se(u.id).then(l=>{l.code===200&&l.data?(h.success("删除成功"),m()):h.error(l.msg)})}).catch(()=>{})}return m(),(u,l)=>{const w=s("el-input"),g=s("el-form-item"),p=s("el-button"),F=s("el-form"),M=s("el-col"),$=s("el-row"),f=s("el-table-column"),j=s("el-image"),q=s("el-table"),P=s("el-pagination"),I=s("el-dialog"),J=K("loading");return V(),O("div",re,[v("div",ue,[e(F,{inline:!0,model:t(i),class:"demo-form-inline",ref_key:"searchFormRef",ref:C},{default:o(()=>[e(g,{label:"网站名称"},{default:o(()=>[e(w,{modelValue:t(i).name,"onUpdate:modelValue":l[0]||(l[0]=a=>t(i).name=a),placeholder:"请输入网站名称",clearable:""},null,8,["modelValue"])]),_:1}),e(g,null,{default:o(()=>[e(p,{type:"primary",onClick:m,icon:t(Q)},{default:o(()=>[_("查询")]),_:1},8,["icon"]),e(p,{icon:t(A),onClick:D},{default:o(()=>[_("重置")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),e($,{gutter:10,class:"mb8"},{default:o(()=>[e(M,{span:1.5},{default:o(()=>[e(p,{icon:t(W),type:"primary",plain:"",onClick:S},{default:o(()=>[_("新增")]),_:1},8,["icon"])]),_:1}),v("div",pe,[e(p,{icon:t(A),circle:"",onClick:m},null,8,["icon"])])]),_:1}),v("div",ce,[X((V(),U(q,{data:t(z),style:{width:"100%",height:"100%"},"row-key":"id"},{default:o(()=>[e(f,{label:"序号","min-width":"80",type:"index"}),e(f,{prop:"name",label:"网站名称","min-width":"150"}),e(f,{prop:"logo",label:"网站logo","min-width":"60"},{default:o(a=>[a.row.logo?(V(),U(j,{key:0,style:{width:"100%","max-height":"100%"},src:a.row.logo,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[a.row.logo],"initial-index":4,"append-to-body":"",fit:"cover","preview-teleported":""},null,8,["src","preview-src-list"])):Y("",!0)]),_:1}),e(f,{prop:"desc",label:"网站描述","min-width":"150"}),e(f,{prop:"address",label:"网站地址","min-width":"150"},{default:o(a=>[v("a",{href:a.row.address,target:"_blank"},B(a.row.address),9,me)]),_:1}),e(f,{prop:"createTime",label:"创建时间","min-width":"120"},{default:o(a=>[v("span",null,B(t(Z)(a.row.createTime)),1)]),_:1}),e(f,{label:"操作",width:"140",fixed:"right"},{default:o(a=>[e(p,{size:"small",type:"primary",link:"",icon:t(ee),onClick:G=>E(a.row)},{default:o(()=>[_("修改")]),_:2},1032,["icon","onClick"]),e(p,{size:"small",type:"primary",link:"",icon:t(le),onClick:G=>L(a.row)},{default:o(()=>[_("删除")]),_:2},1032,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[J,t(y)]]),e(P,{"current-page":t(i).pageNo,"onUpdate:currentPage":l[1]||(l[1]=a=>t(i).pageNo=a),"page-size":t(i).pageSize,"onUpdate:pageSize":l[2]||(l[2]=a=>t(i).pageSize=a),"page-sizes":[10,20,30,50],layout:"total,sizes,prev, pager, next, jumper",background:"",small:"",onChange:m,total:t(i).total},null,8,["current-page","page-size","total"])]),e(I,{modelValue:t(d),"onUpdate:modelValue":l[8]||(l[8]=a=>N(d)?d.value=a:d=a),title:t(x),width:"600px",draggable:""},{footer:o(()=>[v("span",fe,[e(p,{type:"primary",onClick:T},{default:o(()=>[_("确 定")]),_:1}),e(p,{onClick:l[7]||(l[7]=a=>{N(d)?d.value=!1:d=!1,b()})},{default:o(()=>[_("取 消")]),_:1})])]),default:o(()=>[e(F,{ref_key:"addFormRef",ref:k,model:t(n),"label-width":"80px","status-icon":"",rules:t(R)},{default:o(()=>[e(g,{label:"网站名称",prop:"name"},{default:o(()=>[e(w,{modelValue:t(n).name,"onUpdate:modelValue":l[3]||(l[3]=a=>t(n).name=a),placeholder:"请输入网站名称"},null,8,["modelValue"])]),_:1}),e(g,{label:"网站地址",prop:"address"},{default:o(()=>[e(w,{modelValue:t(n).address,"onUpdate:modelValue":l[4]||(l[4]=a=>t(n).address=a),placeholder:"请输入网站地址"},null,8,["modelValue"])]),_:1}),e(g,{label:"网站logo",prop:"logo"},{default:o(()=>[e(ae,{"attach-type":"img","enable-input":!0,placeholder:"请输入网站logo地址","model-value":t(n).logo,"onUpdate:modelValue":l[5]||(l[5]=a=>t(n).logo=a)},null,8,["model-value"])]),_:1}),e(g,{label:"网站描述",prop:"desc"},{default:o(()=>[e(w,{modelValue:t(n).desc,"onUpdate:modelValue":l[6]||(l[6]=a=>t(n).desc=a),placeholder:"请输入网站描述",autosize:{minRows:3,maxRows:6},type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}};export{ge as default};
