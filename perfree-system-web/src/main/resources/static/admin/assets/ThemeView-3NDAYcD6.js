import{a as D,s as G,u as J}from"./theme-tR3NkIjv.js";import{_ as K,r as y,P as M,a as n,b as d,d as u,e as a,f as e,w as s,h as l,F as P,m as Q,u as p,Q as $,j as H,T as W,E as _,k as X,t as h,a5 as Y,i as b,v as Z,x as ee}from"./index-sKYmNANA.js";const x=f=>(Z("data-v-6d0cd1e6"),f=f(),ee(),f),te={class:"page"},se={style:{"text-align":"center","margin-bottom":"10px",display:"flex","justify-content":"center"}},ae=x(()=>a("span",null,"-",-1)),le=x(()=>a("span",null,"-",-1)),oe={slot:"header",class:"header"},ne={class:"theme-box-body"},ce={class:"theme-desc"},ie={class:"theme-btn-box"},de={class:"theme-btn-item"},_e={key:0},re={key:1},ue={key:0,class:"theme-btn-item"},me={class:"theme-btn-item"},pe={key:1,class:"theme-btn-item"},he={class:"theme-btn-item"},fe=x(()=>a("div",{class:"el-upload__text"},[l(" 拖拽主题文件到此或"),a("em",null,"点击上传主题文件")],-1)),ve=x(()=>a("div",{class:"el-upload__tip"}," 主题文件为zip格式,若主题文件已存在,则会自动覆盖更新! ",-1)),ke={__name:"ThemeView",setup(f){let w=y([]),r=y(!1),T=localStorage.getItem(M.STORAGE_TOKEN),A=W.baseURL,S={Authorization:"Bearer "+JSON.parse(T).accessToken},g=y();function v(){D().then(o=>{w.value=o.data})}function C(){r.value=!0}function V(o,c,i){o.code===200?(_.success("主题安装成功"),r.value=!1,g.value.clearFiles(),v()):(_.error(o.msg),g.value.handleRemove(c))}function I(o){_.error("主题上传失败,请检查网络是否通通畅")}function N(o){o.isActive!==1&&G(o.name).then(c=>{c.code===200?(_.success("主题启用成功"),v()):_.error(c.msg)})}function B(o){J(o.name).then(c=>{c.code===200?(_.success("主题卸载成功"),v()):_.error(c.msg)})}return v(),(o,c)=>{const i=n("el-button"),E=n("el-image"),k=n("el-text"),R=n("el-link"),m=n("font-awesome-icon"),U=n("el-card"),O=n("el-col"),z=n("el-row"),F=n("el-icon"),L=n("el-upload"),j=n("el-dialog");return d(),u("div",te,[a("div",se,[e(i,{link:"",type:"primary",onClick:C},{default:s(()=>[l(" 安装新主题 ")]),_:1}),ae,e(i,{link:"",type:"primary"},{default:s(()=>[l(" 主题仓库 ")]),_:1}),le,e(i,{link:"",type:"primary"},{default:s(()=>[l(" 主题开发指南 ")]),_:1})]),e(z,{gutter:15},{default:s(()=>[(d(!0),u(P,null,Q(p(w),t=>(d(),X(O,{xs:24,sm:12,md:8,lg:8,xl:6,key:t.name},{default:s(()=>[e(U,{class:"box-card","body-style":{padding:"0"}},{default:s(()=>[a("div",oe,[a("span",null,h(t.name),1)]),a("div",ne,[e(E,{style:{width:"100%",height:"220px"},src:"/static/themes/"+t.name+"/"+t.screenshots,"preview-src-list":["/static/themes/"+t.name+"/"+t.screenshots]},null,8,["src","preview-src-list"]),a("div",ce,[e(k,{"line-clamp":"1",class:"theme-desc-text"},{default:s(()=>[l(" 主题作者: "+h(t.author.name),1)]),_:2},1024),e(k,{"line-clamp":"1",class:"theme-desc-text"},{default:s(()=>[l(" 联系邮箱: "+h(t.author.email),1)]),_:2},1024),e(k,{"line-clamp":"1",class:"theme-desc-text"},{default:s(()=>[l(" 作者网址: "),e(R,{href:t.author.webSite,target:"_blank",class:"theme-desc-link"},{default:s(()=>[l(h(t.author.webSite),1)]),_:2},1032,["href"])]),_:2},1024),e(k,{"line-clamp":"2",class:"theme-desc-text"},{default:s(()=>[l(h(t.description),1)]),_:2},1024)])]),a("div",ie,[a("div",de,[e(i,{link:"",class:"theme-button",onClick:q=>N(t)},{default:s(()=>[e(m,{icon:"fa-solid fa-square-check",class:Y({"theme-btn-icon":!0,"theme-active":t.isActive===1})},null,8,["class"]),t.isActive===0?(d(),u("span",_e,"启用")):b("",!0),t.isActive===1?(d(),u("span",re,"已启用")):b("",!0)]),_:2},1032,["onClick"])]),t.isActive===1?(d(),u("div",ue,[e(i,{link:"",class:"theme-button"},{default:s(()=>[e(m,{icon:"fa-solid fa-wrench",class:"theme-btn-icon"}),l(" 设置 ")]),_:1})])):b("",!0),a("div",me,[e(i,{link:"",class:"theme-button"},{default:s(()=>[e(m,{icon:"fa-solid fa-pencil-alt",class:"theme-btn-icon"}),l(" 编辑 ")]),_:1})]),t.isActive===0?(d(),u("div",pe,[e(i,{link:"",class:"theme-button",onClick:q=>B(t)},{default:s(()=>[e(m,{icon:"fa-solid fa-trash-can",class:"theme-btn-icon"}),l(" 卸载 ")]),_:2},1032,["onClick"])])):b("",!0),a("div",he,[e(i,{link:"",class:"theme-button"},{default:s(()=>[e(m,{icon:"fa-solid fa-external-link-square",class:"theme-btn-icon"}),l(" 预览 ")]),_:1})])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(j,{modelValue:p(r),"onUpdate:modelValue":c[0]||(c[0]=t=>H(r)?r.value=t:r=t),title:"安装主题",width:"500px",draggable:""},{default:s(()=>[e(L,{class:"upload-demo",drag:"",ref_key:"uploadRef",ref:g,accept:"application/zip","on-success":V,"on-error":I,headers:p(S),action:p(A)+"/api/auth/theme/installTheme"},{tip:s(()=>[ve]),default:s(()=>[e(F,{class:"el-icon--upload"},{default:s(()=>[e(p($))]),_:1}),fe]),_:1},8,["headers","action"])]),_:1},8,["modelValue"])])}}},ge=K(ke,[["__scopeId","data-v-6d0cd1e6"]]);export{ge as default};
