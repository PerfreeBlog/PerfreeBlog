import{_ as O,r as u,k as J,a as h,b as C,d as b,e,w as o,u as t,C as K,f as c,D as F,G as Q,H as W,j as z,a2 as X,h as T,t as Y,N as Z,O as ee,i as U,m as _,q as le,s as ae,E as te,y as oe,bD as ne}from"./index-CihRDGxx.js";import{E as ie,a as re,v as se}from"./el-table-column-CTu-3kzb.js";import"./el-dialog-DFE0lXHY.js";import{E as de}from"./el-pagination-DVMT5liM.js";import{p as ue}from"./perfree-nhCXPnWy.js";import{E as me}from"./el-image-viewer-EMjiGCdX.js";import{E as pe,a as ce}from"./el-col-BEhwhFzy.js";import{t as fe,a as _e,b as ge,c as be,d as ve}from"./tag-BQCuFRh1.js";import{_ as he}from"./attach-select-input-DKludTtF.js";import{E as we}from"./index-DVZG1lLp.js";import{E as ye}from"./index-uh3ESdbA.js";/* empty css                */import"./attach-BUqG8fMY.js";/* empty css                                                                            */import"./index-Bt2gs6dP.js";const ke={class:"page"},Ee={class:"search-box"},Ve={class:"right-tool"},xe={class:"table-box"},Ce={class:"dialog-footer"},Fe={__name:"TagView",setup(ze){const i=u({pageNo:1,pageSize:20,total:0,name:""}),E=u();let r=u(!1),w=u(""),V=u([]),y=u(!1);const n=u({id:"",name:"",thumbnail:"",color:"",slug:""}),A=J({name:[{required:!0,message:"请输入标签名称",trigger:"blur"}]}),v=u();function m(){y.value=!0,fe(i.value).then(s=>{V.value=s.data.list,i.value.total=s.data.total,y.value=!1})}function B(){i.value={name:""},E.value.resetFields()}function D(){g(),w.value="添加标签",r.value=!0}function g(){n.value={id:"",name:"",thumbnail:"",color:"",slug:""},v.value&&v.value.resetFields()}function N(){v.value.validate(s=>{s&&(n.value.id?_e(n.value).then(l=>{l.code===200?(_.success("修改成功"),r.value=!1,g(),m()):_.error(l.msg)}):ge(n.value).then(l=>{l.code===200?(_.success("添加成功"),r.value=!1,g(),m()):_.error(l.msg)}))})}function R(s){w.value="修改标签",g(),be(s.id).then(l=>{n.value=l.data,r.value=!0})}function S(s){we.confirm("确定要删除["+s.name+"]吗？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{ve(s.id).then(l=>{l.code===200&&l.data?(_.success("删除成功"),m()):_.error(l.msg)})}).catch(()=>{})}return m(),(s,l)=>{const k=le,f=ae,d=te,x=oe,I=pe,P=ce,p=ie,$=me,j=re,q=de,G=ne,L=ye,M=se;return h(),C("div",ke,[b("div",Ee,[e(x,{inline:!0,model:t(i),class:"demo-form-inline",ref_key:"searchFormRef",ref:E},{default:o(()=>[e(f,{label:"标签名称"},{default:o(()=>[e(k,{modelValue:t(i).name,"onUpdate:modelValue":l[0]||(l[0]=a=>t(i).name=a),placeholder:"请输入标签名称",clearable:""},null,8,["modelValue"])]),_:1}),e(f,null,{default:o(()=>[e(d,{type:"primary",onClick:m,icon:t(K)},{default:o(()=>[c("查询")]),_:1},8,["icon"]),e(d,{icon:t(F),onClick:B},{default:o(()=>[c("重置")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),e(P,{gutter:10,class:"mb8"},{default:o(()=>[e(I,{span:1.5},{default:o(()=>[e(d,{icon:t(Q),type:"primary",plain:"",onClick:D},{default:o(()=>[c("新增")]),_:1},8,["icon"])]),_:1}),b("div",Ve,[e(d,{icon:t(F),circle:"",onClick:m},null,8,["icon"])])]),_:1}),b("div",xe,[W((h(),z(j,{data:t(V),style:{width:"100%",height:"100%"},"row-key":"id"},{default:o(()=>[e(p,{label:"序号","min-width":"80",type:"index"}),e(p,{prop:"name",label:"标签名称","min-width":"150"}),e(p,{prop:"color",label:"颜色","min-width":"150"},{default:o(a=>[a.row.color?(h(),C("div",{key:0,class:"tableColor",style:X({"background-color":a.row.color})},null,4)):T("",!0)]),_:1}),e(p,{prop:"slug",label:"slug","min-width":"150"}),e(p,{prop:"thumbnail",label:"封面图","min-width":"80"},{default:o(a=>[a.row.thumbnail?(h(),z($,{key:0,style:{width:"100%","max-height":"100%"},src:a.row.thumbnail,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[a.row.thumbnail],"initial-index":4,"append-to-body":"",fit:"cover","preview-teleported":""},null,8,["src","preview-src-list"])):T("",!0)]),_:1}),e(p,{prop:"createTime",label:"创建时间","min-width":"120"},{default:o(a=>[b("span",null,Y(t(ue)(a.row.createTime)),1)]),_:1}),e(p,{label:"操作",width:"140",fixed:"right"},{default:o(a=>[e(d,{size:"small",type:"primary",link:"",icon:t(Z),onClick:H=>R(a.row)},{default:o(()=>[c("修改")]),_:2},1032,["icon","onClick"]),e(d,{size:"small",type:"primary",link:"",icon:t(ee),onClick:H=>S(a.row)},{default:o(()=>[c("删除")]),_:2},1032,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[M,t(y)]]),e(q,{"current-page":t(i).pageNo,"onUpdate:currentPage":l[1]||(l[1]=a=>t(i).pageNo=a),"page-size":t(i).pageSize,"onUpdate:pageSize":l[2]||(l[2]=a=>t(i).pageSize=a),"page-sizes":[10,20,30,50],layout:"total,sizes,prev, pager, next, jumper",background:"",small:"",onChange:m,total:t(i).total},null,8,["current-page","page-size","total"])]),e(L,{modelValue:t(r),"onUpdate:modelValue":l[8]||(l[8]=a=>U(r)?r.value=a:r=a),title:t(w),width:"600px",draggable:""},{footer:o(()=>[b("span",Ce,[e(d,{type:"primary",onClick:N},{default:o(()=>[c("确 定")]),_:1}),e(d,{onClick:l[7]||(l[7]=a=>{U(r)?r.value=!1:r=!1,g()})},{default:o(()=>[c("取 消")]),_:1})])]),default:o(()=>[e(x,{ref_key:"addFormRef",ref:v,model:t(n),"label-width":"80px","status-icon":"",rules:t(A)},{default:o(()=>[e(f,{label:"标签名称",prop:"name"},{default:o(()=>[e(k,{modelValue:t(n).name,"onUpdate:modelValue":l[3]||(l[3]=a=>t(n).name=a),placeholder:"请输入标签名称"},null,8,["modelValue"])]),_:1}),e(f,{label:"标签颜色",prop:"color"},{default:o(()=>[e(G,{modelValue:t(n).color,"onUpdate:modelValue":l[4]||(l[4]=a=>t(n).color=a)},null,8,["modelValue"])]),_:1}),e(f,{label:"标签slug",prop:"slug"},{default:o(()=>[e(k,{modelValue:t(n).slug,"onUpdate:modelValue":l[5]||(l[5]=a=>t(n).slug=a),placeholder:"请输入标签slug"},null,8,["modelValue"])]),_:1}),e(f,{label:"封面图",prop:"thumbnail"},{default:o(()=>[e(he,{"attach-type":"img","enable-input":!0,placeholder:"请选择封面图","model-value":t(n).thumbnail,"onUpdate:modelValue":l[6]||(l[6]=a=>t(n).thumbnail=a)},null,8,["model-value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},Me=O(Fe,[["__scopeId","data-v-18bc8972"]]);export{Me as default};
