import{g as V}from"./theme-tR3NkIjv.js";import{r as s,a as v,y as T,D as k,u as i,b as _,d as y,f as b,j as h,k as x,i as A,E as r}from"./index-DQCGZ03O.js";function E(f){return axios.post("/api/auth/option/saveCurrentThemeSetting",f)}function B(){return axios.get("/api/auth/option/getCurrentThemeSettingValue")}const D={class:"page"},N={__name:"ThemeSettingView",setup(f){const c=s({}),l=s({}),p=s({}),d=s([]),g=s(!1),a=s(!0);function S(){V().then(t=>{if(t.code===200){if(!t.data){g.value=!0,a.value=!1;return}p.value=t.data.option,p.value.onSubmit=C,d.value=t.data.rule,B().then(e=>{e.code===200?l.value=e.data.reduce((n,{key:o,value:u})=>(n[o]=u,n),{}):r.success(e.msg),a.value=!1})}else r.error(t.msg),a.value=!1})}function C(t){a.value=!0;const e=Object.keys(t);let n={options:[]};e.forEach(o=>{let u={key:o,value:t[o]};n.options.push(u)}),E(n).then(o=>{o.code===200?r.success("保存成功"):r.success(o.msg),a.value=!1})}return S(),(t,e)=>{const n=v("form-create"),o=v("el-empty"),u=T("loading");return k((_(),y("div",D,[b(n,{modelValue:i(l),"onUpdate:modelValue":e[0]||(e[0]=m=>h(l)?l.value=m:null),api:i(c),"onUpdate:api":e[1]||(e[1]=m=>h(c)?c.value=m:null),rule:i(d),option:i(p)},null,8,["modelValue","api","rule","option"]),i(g)?(_(),x(o,{key:0,description:"当前主题无设置项"})):A("",!0)])),[[u,i(a)]])}}};export{N as default};
