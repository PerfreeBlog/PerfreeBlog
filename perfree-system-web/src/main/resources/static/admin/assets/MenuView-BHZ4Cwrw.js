import{S as ve,aM as Y,aN as M,aO as N,aP as ye,U as ne,W as O,V as ge,r as b,u as t,aQ as Ve,a as r,j as i,w as e,b as L,a1 as z,t as Z,h as k,a3 as ee,f as u,av as he,aR as ke,a6 as we,aS as Ee,a7 as Ce,_ as Te,aT as G,aU as se,e as l,d as S,i as re,F as H,l as Q,q as ue,k as le,C as Ue,D as te,G as ae,H as Fe,N as xe,O as Ne,m as q,s as Se,v as Pe,E as Re,y as $e,Q as qe,aV as Ae,aW as Be,B as De}from"./index-CihRDGxx.js";import{E as Ie,a as Oe,v as Le}from"./el-table-column-CTu-3kzb.js";import"./el-dialog-DFE0lXHY.js";import{E as je}from"./el-input-number-Wqk3xLmA.js";import"./el-tree-HJbZURUt.js";import{h as ze}from"./perfree-nhCXPnWy.js";import{E as Me}from"./el-tree-select--kPYs3el.js";import{E as Ge,a as He}from"./el-col-BEhwhFzy.js";import{m as Qe,a as We,b as Ke,c as Je,d as Xe}from"./menu-Zv2FujxN.js";import{a as Ye,E as Ze}from"./el-tab-pane-CsrvdZyE.js";import{E as el}from"./index-DVZG1lLp.js";import{E as ll}from"./index-uh3ESdbA.js";const tl=ve({trigger:Y.trigger,placement:M.placement,disabled:Y.disabled,visible:N.visible,transition:N.transition,popperOptions:M.popperOptions,tabindex:M.tabindex,content:N.content,popperStyle:N.popperStyle,popperClass:N.popperClass,enterable:{...N.enterable,default:!0},effect:{...N.effect,default:"light"},teleported:N.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),al={"update:visible":p=>ye(p),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},ol="onUpdate:visible",nl=ne({name:"ElPopover"}),sl=ne({...nl,props:tl,emits:al,setup(p,{expose:v,emit:m}){const d=p,U=O(()=>d[ol]),y=ge("popover"),F=b(),f=O(()=>{var a;return(a=t(F))==null?void 0:a.popperRef}),E=O(()=>[{width:Ve(d.width)},d.popperStyle]),g=O(()=>[y.b(),d.popperClass,{[y.m("plain")]:!!d.content}]),o=O(()=>d.transition===`${y.namespace.value}-fade-in-linear`),x=()=>{var a;(a=F.value)==null||a.hide()},w=()=>{m("before-enter")},P=()=>{m("before-leave")},A=()=>{m("after-enter")},R=()=>{m("update:visible",!1),m("after-leave")};return v({popperRef:f,hide:x}),(a,B)=>(r(),i(t(ke),he({ref_key:"tooltipRef",ref:F},a.$attrs,{trigger:a.trigger,placement:a.placement,disabled:a.disabled,visible:a.visible,transition:a.transition,"popper-options":a.popperOptions,tabindex:a.tabindex,content:a.content,offset:a.offset,"show-after":a.showAfter,"hide-after":a.hideAfter,"auto-close":a.autoClose,"show-arrow":a.showArrow,"aria-label":a.title,effect:a.effect,enterable:a.enterable,"popper-class":t(g),"popper-style":t(E),teleported:a.teleported,persistent:a.persistent,"gpu-acceleration":t(o),"onUpdate:visible":t(U),onBeforeShow:w,onBeforeHide:P,onShow:A,onHide:R}),{content:e(()=>[a.title?(r(),L("div",{key:0,class:z(t(y).e("title")),role:"title"},Z(a.title),3)):k("v-if",!0),ee(a.$slots,"default",{},()=>[u(Z(a.content),1)])]),default:e(()=>[a.$slots.reference?ee(a.$slots,"reference",{key:0}):k("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var rl=we(sl,[["__file","popover.vue"]]);const oe=(p,v)=>{const m=v.arg||v.value,d=m==null?void 0:m.popperRef;d&&(d.triggerRef=p)};var ul={mounted(p,v){oe(p,v)},updated(p,v){oe(p,v)}};const il="popover",dl=Ee(ul,il),pl=Ce(rl,{directive:dl}),ml={class:"el-icon-picker"},cl={class:"icon-panel"},fl={class:"icon-panel"},_l={class:"icon-panel"},bl={__name:"el-icon-picker",props:{modelValue:String},emits:["update:modelValue"],setup(p,{emit:v}){let m=b([]);Object.keys(G.definitions.fas).forEach(g=>{m.value.push("fa-solid fa-"+g)});let d=b([]);Object.keys(G.definitions.far).forEach(g=>{d.value.push("fa-regular fa-"+g)});let U=b([]);Object.keys(G.definitions.fab).forEach(g=>{U.value.push("fa-brands fa-"+g)});let y="fas";const F=v,f=b();function E(g){F("update:modelValue",g),f.value.hide()}return(g,o)=>{const x=se("font-awesome-icon"),w=ue,P=Ye,A=Ze,R=pl;return r(),i(R,{trigger:"click",width:"500",placement:"bottom-start",ref_key:"iconSelect",ref:f},{reference:e(()=>[l(w,{modelValue:p.modelValue,class:"w-50 m-2",placeholder:"请选择图标"},{prefix:e(()=>[p.modelValue?(r(),i(x,{key:0,icon:p.modelValue},null,8,["icon"])):k("",!0)]),_:1},8,["modelValue"])]),default:e(()=>[S("div",ml,[l(A,{modelValue:t(y),"onUpdate:modelValue":o[0]||(o[0]=a=>re(y)?y.value=a:y=a)},{default:e(()=>[l(P,{label:"实心图标",name:"fas"},{default:e(()=>[S("div",cl,[(r(!0),L(H,null,Q(t(m),a=>(r(),i(x,{class:z([a,"icon",{"icon-active":a===p.modelValue}]),icon:a,key:a,onClick:B=>E(a)},null,8,["class","icon","onClick"]))),128))])]),_:1}),l(P,{label:"常规图标",name:"far"},{default:e(()=>[S("div",fl,[(r(!0),L(H,null,Q(t(d),a=>(r(),i(x,{class:z([a,"icon",{"icon-active":a===p.modelValue}]),icon:a,key:a,onClick:B=>E(a)},null,8,["class","icon","onClick"]))),128))])]),_:1}),l(P,{label:"品牌图标",name:"fab"},{default:e(()=>[S("div",_l,[(r(!0),L(H,null,Q(t(U),a=>(r(),i(x,{class:z([a,"icon",{"icon-active":a===p.modelValue}]),icon:a,key:a,onClick:B=>E(a)},null,8,["class","icon","onClick"]))),128))])]),_:1})]),_:1},8,["modelValue"])])]),_:1},512)}}},vl=Te(bl,[["__scopeId","data-v-59ad7b4f"]]),yl={class:"page"},gl={class:"search-box"},Vl={class:"right-tool"},hl={class:"table-box"},kl={class:"dialog-footer"},ql={__name:"MenuView",setup(p){const v=b(),m=b(),d=b({name:"",type:0});let U=b(!1),y=b([]),F=b([]),f=b(!1),E=b("");const g=le({children:"children",label:"name",value:"id"});let o=b({seq:0,icon:"",type:0,pid:"-1",name:"",url:"",componentName:"",component:"",perms:"",target:0,isFrame:1,status:0,menuType:0});const x=le({name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],seq:[{required:!0,message:"请输入排序",trigger:"blur"}],menuType:[{required:!0,message:"请选择菜单分类",trigger:"blur"}],status:[{required:!0,message:"请选择菜单状态",trigger:"blur"}],target:[{required:!0,message:"请选择菜单打开方式",trigger:"blur"}],isFrame:[{required:!0,message:"请选择菜单是否为外链",trigger:"blur"}],url:[{required:!0,message:"请输入菜单地址",trigger:"blur"}],type:[{required:!0,message:"请选择菜单类型",trigger:"blur"}]});function w(){U.value=!0,Qe(d.value).then(_=>{y.value=ze(_.data,"id","pid","children","-1"),F.value=[{id:"-1",name:"主类目",children:y.value}],U.value=!1})}function P(){d.value={name:"",type:0},v.value.resetFields()}function A(_){el.confirm("确定要删除["+_.name+"]吗？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{We(_.id).then(n=>{n.code===200&&n.data?(q.success("删除成功"),w()):q.error(n.msg)})}).catch(()=>{})}function R(_){E.value="添加菜单",D(),f.value=!0,_&&_.id&&(o.value.pid=_.id,o.value.type=_.type)}function a(){f.value=!1,D()}function B(_){D(),Ke(_.id).then(n=>{o.value=n.data,E.value="修改菜单",f.value=!0})}function ie(){m.value.validate(_=>{_&&(o.value.pid||(o.value.pid="-1"),o.value.id?Je(o.value).then(n=>{n.code===200?(q.success("修改成功"),f.value=!1,D(),w()):q.error(n.msg)}):Xe(o.value).then(n=>{n.code===200?(q.success("添加成功"),f.value=!1,D(),w()):q.error(n.msg)}))})}function D(){o.value={seq:0,icon:"",type:0,pid:"-1",name:"",url:"",componentName:"",component:"",perms:"",target:0,isFrame:1,status:0,menuType:0},m.value&&m.value.resetFields()}return w(),(_,n)=>{const $=ue,c=Se,W=De,de=Pe,C=Re,K=$e,V=Ge,J=He,T=Ie,pe=se("font-awesome-icon"),j=qe,me=Oe,ce=Me,h=Ae,I=Be,fe=je,_e=ll,be=Le;return r(),L("div",yl,[S("div",gl,[l(K,{inline:!0,model:t(d),ref_key:"searchFormRef",ref:v},{default:e(()=>[l(c,{label:"菜单名称"},{default:e(()=>[l($,{modelValue:t(d).name,"onUpdate:modelValue":n[0]||(n[0]=s=>t(d).name=s),placeholder:"请输入菜单名称",clearable:""},null,8,["modelValue"])]),_:1}),l(c,{label:"菜单分类"},{default:e(()=>[l(de,{modelValue:t(d).type,"onUpdate:modelValue":n[1]||(n[1]=s=>t(d).type=s),placeholder:"请选择菜单分类",clearable:"",style:{width:"200px"}},{default:e(()=>[(r(),i(W,{key:0,label:"前台",value:0})),(r(),i(W,{key:1,label:"后台",value:1}))]),_:1},8,["modelValue"])]),_:1}),l(c,null,{default:e(()=>[l(C,{type:"primary",onClick:w,icon:t(Ue)},{default:e(()=>[u("查询")]),_:1},8,["icon"]),l(C,{icon:t(te),onClick:P},{default:e(()=>[u("重置")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),l(J,{gutter:10,class:"mb8"},{default:e(()=>[l(V,{span:1.5},{default:e(()=>[l(C,{icon:t(ae),type:"primary",plain:"",onClick:R},{default:e(()=>[u("新增")]),_:1},8,["icon"])]),_:1}),S("div",Vl,[l(C,{icon:t(te),circle:"",onClick:w},null,8,["icon"])])]),_:1}),S("div",hl,[Fe((r(),i(me,{data:t(y),style:{width:"100%",height:"100%"},"row-key":"id"},{default:e(()=>[l(T,{prop:"name",label:"菜单名称",width:"240"}),l(T,{prop:"icon",label:"图标",width:"100"},{default:e(s=>[s.row.icon?(r(),i(pe,{key:0,icon:s.row.icon},null,8,["icon"])):k("",!0)]),_:1}),l(T,{prop:"seq",label:"排序",width:"80"}),l(T,{prop:"url",label:"菜单地址","min-width":"150"}),l(T,{prop:"component",label:"组件路径","min-width":"150"}),l(T,{prop:"perms",label:"权限标识","min-width":"150"}),l(T,{prop:"status",label:"状态",width:"80"},{default:e(s=>[s.row.status===0?(r(),i(j,{key:0,class:"ml-2",type:"success"},{default:e(()=>[u("开启")]),_:1})):(r(),i(j,{key:1,class:"ml-2",type:"danger"},{default:e(()=>[u("关闭")]),_:1}))]),_:1}),l(T,{prop:"type",label:"菜单分类",width:"80"},{default:e(s=>[s.row.type===0?(r(),i(j,{key:0,class:"ml-2",type:"success"},{default:e(()=>[u("前台")]),_:1})):(r(),i(j,{key:1,class:"ml-2",type:"info"},{default:e(()=>[u("后台")]),_:1}))]),_:1}),l(T,{label:"操作",width:"240",fixed:"right"},{default:e(s=>[l(C,{size:"small",type:"primary",link:"",icon:t(xe),onClick:X=>B(s.row)},{default:e(()=>[u("修改")]),_:2},1032,["icon","onClick"]),l(C,{size:"small",type:"primary",link:"",icon:t(ae),onClick:X=>R(s.row)},{default:e(()=>[u("新增")]),_:2},1032,["icon","onClick"]),l(C,{size:"small",type:"primary",link:"",icon:t(Ne),onClick:X=>A(s.row)},{default:e(()=>[u("删除")]),_:2},1032,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[be,t(U)]])]),l(_e,{modelValue:t(f),"onUpdate:modelValue":n[15]||(n[15]=s=>re(f)?f.value=s:f=s),title:t(E),width:"800px",draggable:""},{footer:e(()=>[S("span",kl,[l(C,{type:"primary",onClick:ie},{default:e(()=>[u("确 定")]),_:1}),l(C,{onClick:a},{default:e(()=>[u("取 消")]),_:1})])]),default:e(()=>[l(K,{ref_key:"ruleFormRef",ref:m,model:t(o),rules:t(x),"label-width":"100px",class:"demo-ruleForm","status-icon":""},{default:e(()=>[l(c,{label:"父级菜单",prop:"pid"},{default:e(()=>[l(ce,{modelValue:t(o).pid,"onUpdate:modelValue":n[2]||(n[2]=s=>t(o).pid=s),data:t(F),props:t(g),"check-strictly":"","render-after-expand":!1,style:{width:"100%"},clearable:""},null,8,["modelValue","data","props"])]),_:1}),l(c,{label:"菜单类型",prop:"menuType"},{default:e(()=>[l(I,{modelValue:t(o).menuType,"onUpdate:modelValue":n[3]||(n[3]=s=>t(o).menuType=s)},{default:e(()=>[l(h,{label:0,value:0},{default:e(()=>[u("目录")]),_:1}),l(h,{label:1,value:1},{default:e(()=>[u("菜单")]),_:1}),l(h,{label:2,value:2},{default:e(()=>[u("按钮")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(J,null,{default:e(()=>[l(V,{xs:24,sm:24,md:12,lg:12,xl:12},{default:e(()=>[l(c,{label:"菜单名称",prop:"name"},{default:e(()=>[l($,{modelValue:t(o).name,"onUpdate:modelValue":n[4]||(n[4]=s=>t(o).name=s),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(V,{xs:24,sm:24,md:12,lg:12,xl:12},{default:e(()=>[l(c,{label:"菜单分类",prop:"type"},{default:e(()=>[l(I,{modelValue:t(o).type,"onUpdate:modelValue":n[5]||(n[5]=s=>t(o).type=s)},{default:e(()=>[l(h,{label:0,value:0},{default:e(()=>[u("前台")]),_:1}),l(h,{label:1,value:1},{default:e(()=>[u("后台")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(o).menuType===0||t(o).menuType===1?(r(),i(V,{key:0,xs:24,sm:24,md:12,lg:12,xl:12},{default:e(()=>[l(c,{label:"菜单图标",prop:"icon"},{default:e(()=>[l(vl,{modelValue:t(o).icon,"onUpdate:modelValue":n[6]||(n[6]=s=>t(o).icon=s)},null,8,["modelValue"])]),_:1})]),_:1})):k("",!0),l(V,{xs:24,sm:24,md:12,lg:12,xl:12},{default:e(()=>[l(c,{label:"菜单排序",prop:"seq"},{default:e(()=>[l(fe,{modelValue:t(o).seq,"onUpdate:modelValue":n[7]||(n[7]=s=>t(o).seq=s),min:0,max:9999,"controls-position":"right",placeholder:"菜单排序"},null,8,["modelValue"])]),_:1})]),_:1}),t(o).menuType===1?(r(),i(V,{key:1,xs:24,sm:24,md:12,lg:12,xl:12},{default:e(()=>[l(c,{label:"菜单地址",prop:"url"},{default:e(()=>[l($,{modelValue:t(o).url,"onUpdate:modelValue":n[8]||(n[8]=s=>t(o).url=s),placeholder:"请输入菜单地址"},null,8,["modelValue"])]),_:1})]),_:1})):k("",!0),t(o).menuType===1&&t(o).type===1?(r(),i(V,{key:2,xs:24,sm:24,md:12,lg:12,xl:12},{default:e(()=>[l(c,{label:"组件名称",prop:"componentName"},{default:e(()=>[l($,{modelValue:t(o).componentName,"onUpdate:modelValue":n[9]||(n[9]=s=>t(o).componentName=s),placeholder:"请输入组件名称"},null,8,["modelValue"])]),_:1})]),_:1})):k("",!0),t(o).menuType===1&&t(o).type===1?(r(),i(V,{key:3,xs:24,sm:24,md:12,lg:12,xl:12},{default:e(()=>[l(c,{label:"组件路径",prop:"component"},{default:e(()=>[l($,{modelValue:t(o).component,"onUpdate:modelValue":n[10]||(n[10]=s=>t(o).component=s),placeholder:"请输入组件路径"},null,8,["modelValue"])]),_:1})]),_:1})):k("",!0),t(o).menuType===2?(r(),i(V,{key:4,xs:24,sm:24,md:12,lg:12,xl:12},{default:e(()=>[l(c,{label:"权限标识",prop:"perms"},{default:e(()=>[l($,{modelValue:t(o).perms,"onUpdate:modelValue":n[11]||(n[11]=s=>t(o).perms=s),placeholder:"请输入权限标识"},null,8,["modelValue"])]),_:1})]),_:1})):k("",!0),t(o).menuType===1?(r(),i(V,{key:5,xs:24,sm:24,md:12,lg:12,xl:12},{default:e(()=>[l(c,{label:"打开方式",prop:"target"},{default:e(()=>[l(I,{modelValue:t(o).target,"onUpdate:modelValue":n[12]||(n[12]=s=>t(o).target=s)},{default:e(()=>[l(h,{label:0,value:0},{default:e(()=>[u("本页")]),_:1}),l(h,{label:1,value:1},{default:e(()=>[u("新窗口")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):k("",!0),t(o).menuType===1?(r(),i(V,{key:6,xs:24,sm:24,md:12,lg:12,xl:12},{default:e(()=>[l(c,{label:"是否外链",prop:"isFrame"},{default:e(()=>[l(I,{modelValue:t(o).isFrame,"onUpdate:modelValue":n[13]||(n[13]=s=>t(o).isFrame=s)},{default:e(()=>[l(h,{label:0,value:0},{default:e(()=>[u("是")]),_:1}),l(h,{label:1,value:1},{default:e(()=>[u("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):k("",!0),l(V,{xs:24,sm:24,md:12,lg:12,xl:12},{default:e(()=>[l(c,{label:"菜单状态",prop:"status"},{default:e(()=>[l(I,{modelValue:t(o).status,"onUpdate:modelValue":n[14]||(n[14]=s=>t(o).status=s)},{default:e(()=>[l(h,{label:0,value:0},{default:e(()=>[u("开启")]),_:1}),l(h,{label:1,value:1},{default:e(()=>[u("关闭")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}};export{ql as default};
