import{_ as h,c as B,r as R,g as A,e as w}from"../../index-Cbj4A6nx.js";const s=window.Vue.createElementVNode,n=window.Vue.resolveComponent,o=window.Vue.createVNode,l=window.Vue.withCtx,V=window.Vue.unref,v=window.Vue.openBlock,M=window.Vue.createBlock,P=window.Vue.createCommentVNode,z=window.Vue.withModifiers,x=window.Vue.createTextVNode,O=window.Vue.createElementBlock,U={class:"container"},T={class:"login-box"},q={class:"login-code"},H=["src"],I={class:"login-bottom-box"},W={class:"register-box"},F=window.ElementPlus.ElMessage,K=window.ElementPlus.ElMessageBox,S=window.VueRouter.useRouter,j=window.Vue.computed,m=window.Vue.ref,D={__name:"RegisterView",setup(G){const y=S(),f=m();let c=m(!1);B();const t=m({userName:"",account:"",password:"",email:"",rememberMe:!1,code:"",uuid:""}),b=j(()=>({userName:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:2,max:20,message:"昵称必须在2-20字之间",trigger:"blur"}],account:[{required:!0,message:"请输入账户",trigger:"blur"},{min:5,max:16,message:"账户必须在5-16字之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:5,max:16,message:"密码必须在5-16字之间",trigger:"blur"}],code:[{required:!0,trigger:"blur",message:"验证码不能为空"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]}));let g=m("");const _=m(!1),C=()=>{f.value.validate(i=>{i&&R(t.value).then(e=>{e.code===200?K.confirm("注册成功,前往登录~","提示",{confirmButtonText:"确认",showCancelButton:!1,type:"success"}).then(()=>{y.replace("/login")}).catch(()=>{}):(F.error(e.msg),t.value.code="",_.value=!1,p())}).catch(()=>{})})},p=()=>{A().then(i=>{g.value="data:image/gif;base64,"+i.data.img,t.value.uuid=i.data.uuid})};return(()=>{c.value=w("WEB_OPEN_CAPTCHA","system_setting")?w("WEB_OPEN_CAPTCHA","system_setting").value==="ON":!0,c.value&&p()})(),(i,e)=>{const u=n("font-awesome-icon"),d=n("el-input"),r=n("el-form-item"),k=n("el-button"),N=n("router-link"),E=n("el-form");return v(),O("div",U,[s("div",T,[o(E,{ref_key:"registerRef",ref:f,model:t.value,rules:b.value,class:"login-form"},{default:l(()=>[e[9]||(e[9]=s("h3",{class:"title"},"Perfree",-1)),o(r,{prop:"userName"},{default:l(()=>[o(d,{modelValue:t.value.userName,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.userName=a),type:"text",size:"large","auto-complete":"off",placeholder:"请输入昵称",autocomplete:"off",readonly:"",onfocus:"this.removeAttribute('readonly');"},{prefix:l(()=>[o(u,{icon:"fa-solid fa-chalkboard-user "})]),_:1},8,["modelValue"])]),_:1}),o(r,{prop:"account"},{default:l(()=>[o(d,{modelValue:t.value.account,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.account=a),type:"text",size:"large","auto-complete":"off",placeholder:"请输入账户",autocomplete:"off",readonly:"",onfocus:"this.removeAttribute('readonly');"},{prefix:l(()=>[o(u,{icon:"fa-solid fa-user "})]),_:1},8,["modelValue"])]),_:1}),o(r,{prop:"password"},{default:l(()=>[o(d,{modelValue:t.value.password,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.password=a),type:"password",size:"large","auto-complete":"off",placeholder:"请输入密码",readonly:"",onfocus:"this.removeAttribute('readonly');"},{prefix:l(()=>[o(u,{icon:"fa-solid fa-lock "})]),_:1},8,["modelValue"])]),_:1}),o(r,{prop:"email"},{default:l(()=>[o(d,{modelValue:t.value.email,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.email=a),type:"text",size:"large","auto-complete":"off",placeholder:"请输入邮箱地址"},{prefix:l(()=>[o(u,{icon:"fa-solid fa-mail-bulk"})]),_:1},8,["modelValue"])]),_:1}),V(c)?(v(),M(r,{key:0,prop:"code"},{default:l(()=>[o(d,{modelValue:t.value.code,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.code=a),"auto-complete":"off",placeholder:"请输入验证码",size:"large",style:{width:"63%"}},{prefix:l(()=>[o(u,{icon:"fa-solid fa-fax  "})]),_:1},8,["modelValue"]),s("div",q,[s("img",{src:V(g),onClick:p,class:"login-code-img",alt:""},null,8,H)])]),_:1})):P("",!0),o(r,{style:{width:"100%","margin-top":"20px"}},{default:l(()=>[o(k,{loading:_.value,size:"large",type:"primary",style:{width:"100%"},onClick:z(C,["prevent"])},{default:l(()=>e[5]||(e[5]=[s("span",null,"注 册",-1)])),_:1},8,["loading"]),s("div",I,[s("div",W,[e[7]||(e[7]=x(" 已有账号? ")),o(N,{class:"link-type",to:"/login"},{default:l(()=>e[6]||(e[6]=[x("前往登录")])),_:1})]),e[8]||(e[8]=s("div",{class:"forget-password-box"},null,-1))])]),_:1})]),_:1},8,["model","rules"])]),e[10]||(e[10]=s("div",{class:"login-footer"},[s("span",null,"Copyright © 2018-2024 All Rights Reserved. ")],-1))])}}},Q=h(D,[["__scopeId","data-v-612d9e62"]]);export{Q as default};
